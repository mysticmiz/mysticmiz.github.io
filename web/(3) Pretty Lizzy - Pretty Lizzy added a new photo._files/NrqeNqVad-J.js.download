if (self.CavalryLogger) { CavalryLogger.start_js(["pFRDd"]); }

__d("CometFeedUFI_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"useDefaultActor",type:"Boolean"}],kind:"Fragment",metadata:null,name:"CometFeedUFI_feedback",selections:[{alias:null,args:[{kind:"Variable",name:"use_default_actor",variableName:"useDefaultActor"}],concreteType:null,kind:"LinkedField",name:"viewer_actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"CometFeedUFIRenderer_feedback"}],type:"Feedback"};e.exports=a}),null);
__d("CometFeedUFI_shareable.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometFeedUFI_shareable",selections:[{args:null,kind:"FragmentSpread",name:"CometFeedUFIRenderer_shareable"}],type:"Entity"};e.exports=a}),null);
__d("CometFeedUFIRenderer_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{defaultValue:!0,kind:"LocalArgument",name:"canShowSeenState",type:"Boolean!"},{kind:"RootArgument",name:"feedbackSource",type:"Int"}],kind:"Fragment",metadata:null,name:"CometFeedUFIRenderer_feedback",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:[{kind:"Variable",name:"feedback_source_integer",variableName:"feedbackSource"}],kind:"ScalarField",name:"is_eligible_for_real_time_updates",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometUFICommentListRenderer_feedback"},{args:null,kind:"FragmentSpread",name:"CometUFISummaryAndActions_feedback"}],type:"Feedback"};e.exports=a}),null);
__d("CometFeedUFIRenderer_shareable.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometFeedUFIRenderer_shareable",selections:[{args:null,kind:"FragmentSpread",name:"CometUFISummaryAndActions_shareable"}],type:"Entity"};e.exports=a}),null);
__d("useCometTrackingCodeForMutationProperties",["CometRouteURL","CometTrackingCodeContext","React","getReferrerURI"],(function(a,b,c,d,e,f){"use strict";var g=b("CometRouteURL").useRouteURLParams;c=b("React");var h=c.useContext,i=c.useMemo;function a(){var a=g(),c=b("getReferrerURI")(),d=c?c.getPath():void 0,e=h(b("CometTrackingCodeContext")),f=a.notif_id,j=a.notif_t;c=i(function(){var a=null;f!=null&&(a=JSON.stringify({alert_id:f,notif_source:"notif_tab",notif_type:j}));a=a!=null?[a].concat(e.encrypted_tracking):e.encrypted_tracking;return{feedback_referrer:d,is_tracking_encrypted:!0,tracking:a}},[d,f,j,e]);return c}e.exports=a}),null);
__d("CometUFICommentListState",["ErrorNormalizeUtils","FBLogger","UFI2CommentsConfig","UFI2ViewOption","gkx","recoverableViolation","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function g(a){var b=a.count,c=a.direction,d=a.error,e=a.hasMore,f=a.isLoading,g=a.pageSize;a=a.totalCount;if(a!=null&&a===0)return null;if(b===0)return null;return!e?null:{__type:"PAGER",count:Math.min(b,g),direction:c,status:{error:d,pending:f}}}function h(a){var b=a.count,c=a.expanded;a=a.minCountToShowCollapser;if(!c)return null;if(a==null)return null;return b<=a?null:{__type:"REPLIES_COLLAPSER",count:b}}function i(a){var b=a.error,c=a.expanded,d=a.isLoading;a=a.totalCount;return c||a===0?null:{__type:"REPLIES_EXPANDER",count:a,status:{error:b,pending:d}}}function j(a){var b=a.direction;a=a.page;if(b==="forward"){b=Math.max(0,a.afterCount-1);return babelHelpers["extends"]({},a,{afterCount:b,hasNext:b>0})}b=Math.max(0,a.beforeCount-1);return babelHelpers["extends"]({},a,{beforeCount:b,hasPrevious:b>0})}function k(a,c){var d=l(a,c);if(a.__type!=="INITIAL_STATE"&&c==null)throw b("unrecoverableViolation")("Expected state not to be null","ufi2");return d}function l(a,c){if(a.__type==="INITIAL_STATE"){var d,e=a.args,f=e.afterCount,k=e.beforeCount,l=e.canViewerComment,m=e.commentIDs,o=e.commentsByID,r=e.feedbackTargetID,u=e.hasNext,v=e.hasPrevious,w=e.hiddenCommentIDs,x=e.initiallyExpanded,y=e.isListVisible,z=e.pageSize,A=e.shouldRenderComposerPreemptively,B=e.topLevelFeedbackTargetID,C=e.totalCount;e=e.viewOption;d={backward:g({count:k,direction:"backward",error:null,hasMore:v,isLoading:(d=c==null?void 0:(d=c.pagers)==null?void 0:(d=d.backward)==null?void 0:(d=d.status)==null?void 0:d.pending)!=null?d:!1,pageSize:z,totalCount:C}),forward:g({count:f,direction:"forward",error:null,hasMore:u,isLoading:(d=c==null?void 0:(d=c.pagers)==null?void 0:(d=d.forward)==null?void 0:(d=d.status)==null?void 0:d.pending)!=null?d:!1,pageSize:z,totalCount:C})};var ba={};w.forEach(function(a){ba[a]="COLLAPSED"});w={canViewerComment:l,commentPages:m.length>0?[{__type:"COMMENTS_PAGE",afterCount:f,beforeCount:k,commentIDs:m,hasNext:u,hasPrevious:v,state:"VISIBLE"}]:[],commentsByID:o,commentsHiddenByViewer:ba,expanded:(z=c==null?void 0:c.expanded)!=null?z:x,feedbackTargetID:r,hasPaged:{backward:!1,forward:!1},isListVisible:y,locallyComposedCommentIDs:[],newCommentsPage:{__type:"NEW_COMMENTS_PAGE",commentIDs:[],visibleStates:{}},pagers:d,shouldComposerRenderWhenListIsExpanded:A,topLevelFeedbackTargetID:B,viewOption:e};if(a.args.depth===0)return babelHelpers["extends"]({},w,{__type:"DEPTH_0",status:{error:null,pending:!1}});l=a.args.minCountToShowCollapser;f=null;c!=null&&c.__type==="DEPTH_1"&&(f=c.repliesExpander);return babelHelpers["extends"]({},w,{__type:"DEPTH_1",repliesCollapser:h({count:m.length,expanded:x,minCountToShowCollapser:l}),repliesExpander:i({error:null,expanded:(k=c==null?void 0:c.expanded)!=null?k:x,isLoading:(o=(u=f)==null?void 0:(v=u.status)==null?void 0:v.pending)!=null?o:!1,totalCount:C})})}if(c==null)throw b("unrecoverableViolation")("Expected state not to be null","ufi2");switch(a.__type){case"COLLAPSE_LIST":z=a.args;r=z.depth;y=z.totalCount;if(c.expanded===!1)return c;if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{expanded:!1});d=t.getCommentsCount({depth:r,state:c})===0;A=y>0&&d===!0;A&&b("FBLogger")("ufi2").warn("UFI2CommentsListState.updater(...): COLLAPSE_LIST: expected list not to be empty if connection is not empty");return babelHelpers["extends"]({},c,{expanded:!1,repliesCollapser:null,repliesExpander:i({error:c.repliesExpander?c.repliesExpander.status.error:null,expanded:!1,isLoading:!1,totalCount:y})});case"DELETE_COMMENT":B=a.args;var D=B.commentID;e=B.depth;w=c.commentPages;m=c.locallyComposedCommentIDs;var E=c.newCommentsPage;if(w.length===0&&E.commentIDs.length===0)return c;l=E.commentIDs.filter(function(a){return a!==D});k=t.getVisibleCommentsCount({depth:e,state:c});x=l.length<E.commentIDs.length;if(x){var ca={};l.forEach(function(a){ca[a]=E.visibleStates[a]});f=babelHelpers["extends"]({},E,{commentIDs:l,visibleStates:ca});u=w.map(function(a){return j({direction:"backward",page:a})});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:u,newCommentsPage:f});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");v=a.args.minCountToShowCollapser;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:u,newCommentsPage:f,repliesCollapser:h({count:k-1,expanded:c.expanded,minCountToShowCollapser:v})})}var F=null,G=!1;o=w.map(function(a,b){if(G)return j({direction:"backward",page:a});var c=a.commentIDs.filter(function(a){return a!==D});if(c.length<a.commentIDs.length){G=!0;F=b;return babelHelpers["extends"]({},a,{commentIDs:c})}return a}).map(function(a,b){return a&&F!=null&&b<F?j({direction:"forward",page:a}):a}).filter(Boolean);if(G===!1){b("FBLogger")("ufi2").warn("CometUFICommentListState.updater(...): Tried deleting a comment that isnt present");return c}C=m.filter(function(a){return a!==D});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:o,locallyComposedCommentIDs:C});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:o,locallyComposedCommentIDs:C,repliesCollapser:h({count:k-1,expanded:c.expanded,minCountToShowCollapser:a.args.minCountToShowCollapser})});case"EXPAND_HIDDEN_COMMENTS":z=a.args.commentIDs;var da=c.commentsHiddenByViewer,H=babelHelpers["extends"]({},da);z.forEach(function(a){var c=da[a];if(c==null){b("FBLogger")("ufi2").warn("CometUFICommentListState.updater(...): Tried expanding a comment that is not hidden");return}c==="COLLAPSED"&&(H[a]="EXPANDED")});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsHiddenByViewer:H}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsHiddenByViewer:H});case"EXPAND_LIST":r=a.args;d=r.depth;A=r.totalCount;y=c.commentPages;B=c.newCommentsPage;if(c.expanded===!0&&c.shouldComposerRenderWhenListIsExpanded===!0)return c;if(d!==0&&t.isRepliesExpanderLoading({depth:d,state:c}))return c;if(A===0)return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",expanded:!0,shouldComposerRenderWhenListIsExpanded:!0}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:!0,repliesCollapser:null,repliesExpander:null,shouldComposerRenderWhenListIsExpanded:!0});e=t.getVisibleCommentsCount({depth:d,state:c});if(e===0){x=t.getCommentsCount({depth:d,state:c})===0;if(x)return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",expanded:!0,shouldComposerRenderWhenListIsExpanded:!0,status:{error:null,pending:!0}}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:!1,repliesCollapser:null,repliesExpander:i({error:null,expanded:!1,isLoading:!0,totalCount:A})});l=y.length>0?y[0]:null;u=l!=null?[babelHelpers["extends"]({},l,{state:"VISIBLE"})].concat(y.slice(1)):y;var ea={};B.commentIDs.forEach(function(a){ea[a]="VISIBLE"});f=babelHelpers["extends"]({},B,{visibleStates:ea});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:u,expanded:!0,newCommentsPage:f,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");v=(l!=null?l.commentIDs.length:0)+B.commentIDs.length;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:u,expanded:!0,newCommentsPage:f,repliesCollapser:h({count:v,expanded:!0,minCountToShowCollapser:a.args.minCountToShowCollapser}),repliesExpander:null,shouldComposerRenderWhenListIsExpanded:!0})}if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",expanded:!0,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");return babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:!0,repliesCollapser:h({count:e,expanded:!0,minCountToShowCollapser:a.args.minCountToShowCollapser}),repliesExpander:null,shouldComposerRenderWhenListIsExpanded:!0});case"HIDE_COMMENTS":w=a.args.commentIDs;m=c.commentsHiddenByViewer;var I=babelHelpers["extends"]({},m);w.forEach(function(a){I[a]="LOCALLY_HIDDEN"});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsHiddenByViewer:I}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsHiddenByViewer:I});case"RECEIVE_COMMENTS_PAGE":o=c.commentPages;C=c.locallyComposedCommentIDs;var J=c.newCommentsPage;k=c.pagers;z=a.args;var K=z.commentIDs;r=z.depth;d=z.direction;x=z.feedbackTargetID;A=z.hiddenCommentIDs;y=z.pageSize;var L=t.isPagerLoading({depth:r,direction:d,state:c})===!0;l=r!==0&&t.isRepliesExpanderLoading({depth:r,state:c});var fa=r===0&&!L;B=J.commentIDs.filter(function(a){return!(K.includes(a)&&(!fa||J.visibleStates[a]==="HIDDEN"))});u=C.filter(function(a){return!K.includes(a)});var M={};B.forEach(function(a){M[a]=J.visibleStates[a]});f=babelHelpers["extends"]({},J,{commentIDs:B,visibleStates:M});var ga=new Set(o.reduce(function(a,b){return a.concat(b.commentIDs)},[]).concat(fa?B:[]));v=K.filter(function(a){return!ga.has(a)});d==="forward"&&a.args.hasNext===!0&&a.args.afterCount===0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",x).warn("CometUFICommentListState.receiveCommentsPage: Received page of comments that has_next_page but after_count is 0");a.args.direction==="forward"&&a.args.hasNext===!1&&a.args.afterCount>0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",x).warn("CometUFICommentListState.receiveCommentsPage: Received page of comments that does NOT have next_page but after_count is > 0");a.args.direction==="backward"&&a.args.hasPrevious===!0&&a.args.beforeCount===0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",x).warn("CometUFICommentListState.receiveCommentsPage: Received page of comments that has_previous_page but before_count is 0");a.args.direction==="backward"&&a.args.hasPrevious===!1&&a.args.beforeCount>0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",x).warn("CometUFICommentListState.receiveCommentsPage: Received page of comments that does NOT have previous_page but before_count is > 0");e=c.shouldComposerRenderWhenListIsExpanded===!0||L===!0||l===!0;var N=babelHelpers["extends"]({},c.commentsHiddenByViewer);A.forEach(function(a){Object.prototype.hasOwnProperty.call(N,a)||(N[a]="COLLAPSED")});m=ga.size;if(r!==0&&a.args.direction==="forward"&&m===0){w=a.args;z=w.afterCount;C=w.hasNext;d={backward:null,forward:g({count:z,direction:"forward",error:null,hasMore:C,isLoading:!1,pageSize:y})};var O=c.expanded||l?"VISIBLE":"HIDDEN";x={__type:"COMMENTS_PAGE",afterCount:z,beforeCount:B.length,commentIDs:v,hasNext:C,hasPrevious:!1,state:O};B.forEach(function(a){M[a]=O});f=babelHelpers["extends"]({},J,{commentIDs:B,visibleStates:M});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");if(c.__type!=="DEPTH_1")throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");A=a.args.minCountToShowCollapser;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:[x],commentsHiddenByViewer:N,expanded:O==="VISIBLE",locallyComposedCommentIDs:u,newCommentsPage:f,pagers:d,repliesCollapser:h({count:v.length,expanded:l,minCountToShowCollapser:A}),repliesExpander:l?null:c.repliesExpander,shouldComposerRenderWhenListIsExpanded:e})}m=o[0];w=o[o.length-1];z=t.getVisibleCommentsCount({depth:r,state:c});if(a.args.direction==="backward"){if(L&&m!=null&&m.state!=="VISIBLE")throw b("unrecoverableViolation")("Expected first available page to be visible if backward pager was loading when backward comments were received","ufi2");C=a.args;x=C.beforeCount;d=C.hasPrevious;A=x<=B.length;A&&(M={},f.commentIDs.forEach(function(a){M[a]=L?"VISIBLE":"HIDDEN"}),f=babelHelpers["extends"]({},f,{visibleStates:M}));r=x-f.commentIDs.length-u.length;C=babelHelpers["extends"]({},k,{backward:L?g({count:r,direction:"backward",error:null,hasMore:d&&!A,isLoading:!1,pageSize:y}):k.backward});m={__type:"COMMENTS_PAGE",afterCount:((B=m==null?void 0:m.afterCount)!=null?B:0)+((B=m==null?void 0:(r=m.commentIDs)==null?void 0:r.length)!=null?B:0),beforeCount:x,commentIDs:v,hasNext:!0,hasPrevious:d,state:L||l?"VISIBLE":"HIDDEN"};if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:[m].concat(o),commentsHiddenByViewer:N,locallyComposedCommentIDs:u,newCommentsPage:f,pagers:C,shouldComposerRenderWhenListIsExpanded:e});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");r=a.args.minCountToShowCollapser;B=l?!0:c.expanded;x=z+(m.state==="VISIBLE"?v.length:0)+(A&&L?f.commentIDs.length:0);return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:[m].concat(o),commentsHiddenByViewer:N,expanded:B,locallyComposedCommentIDs:u,newCommentsPage:f,pagers:C,repliesCollapser:h({count:x,expanded:B,minCountToShowCollapser:r}),repliesExpander:l?null:c.repliesExpander,shouldComposerRenderWhenListIsExpanded:e})}if(L&&w!=null&&w.state!=="VISIBLE")throw b("unrecoverableViolation")("Expected last available page to be visible if forward pager was loading when forward comments were received","ufi2");d=a.args;A=d.afterCount;m=d.hasNext;C=babelHelpers["extends"]({},k,{forward:L?g({count:A,direction:"forward",error:null,hasMore:m,isLoading:!1,pageSize:y}):k.forward});d={__type:"COMMENTS_PAGE",afterCount:A,beforeCount:((x=w==null?void 0:w.beforeCount)!=null?x:0)+((r=w==null?void 0:(B=w.commentIDs)==null?void 0:B.length)!=null?r:0),commentIDs:v,hasNext:m,hasPrevious:!0,state:L||l?"VISIBLE":"HIDDEN"};var P=0;y=l?o.map(function(a){a.state==="HIDDEN"&&(P+=a.commentIDs.length);return babelHelpers["extends"]({},a,{state:"VISIBLE"})}):o;if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:[].concat(y,[d]),commentsHiddenByViewer:N,locallyComposedCommentIDs:u,newCommentsPage:f,pagers:C,shouldComposerRenderWhenListIsExpanded:e});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");k=a.args.minCountToShowCollapser;A=d.state==="VISIBLE"?z+P+v.length:z+P;x=l?!0:c.expanded;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:[].concat(y,[d]),commentsHiddenByViewer:N,expanded:x,locallyComposedCommentIDs:u,newCommentsPage:f,pagers:C,repliesCollapser:h({count:A,expanded:x,minCountToShowCollapser:k}),repliesExpander:l?null:c.repliesExpander,shouldComposerRenderWhenListIsExpanded:e});case"RECEIVE_NEW_COMMENT":w=a.args;var Q=w.commentID;B=w.depth;r=w.pageSize;m=w.prevTotalCount;o=w.totalCount;v=c.commentPages;z=c.commentsByID;y=c.expanded;d=c.locallyComposedCommentIDs;var R=c.newCommentsPage;u=c.pagers;f=c.viewOption;C=t.getCommentsCount({depth:B,state:c})===0;A=Object.prototype.hasOwnProperty.call(R.visibleStates,Q)||v.some(function(a){return a.commentIDs.includes(Q)});if(A)return c;x=z[Q]!=null&&z[Q].is_locally_composed===!0;var S=!b("UFI2ViewOption").isChronologicalOrder(f)&&c.__type!=="DEPTH_0";k=c.repliesExpander!=null?babelHelpers["extends"]({},c.repliesExpander,{count:Math.min(c.repliesExpander.count+1,o)}):null;if(v.length===0){e=babelHelpers["extends"]({},R,{commentIDs:[Q].concat(R.commentIDs),visibleStates:babelHelpers["extends"]({},R.visibleStates,(l={},l[Q]=y||x||B!==0&&C&&m===0?"VISIBLE":"HIDDEN",l))});w=x?[Q].concat(d):d;if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",locallyComposedCommentIDs:w,newCommentsPage:e});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");A=a.args.minCountToShowCollapser;z=C&&m===0?!0:y;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:z,locallyComposedCommentIDs:w,newCommentsPage:e,repliesCollapser:h({count:e.commentIDs.length,expanded:y,minCountToShowCollapser:A}),repliesExpander:k,shouldComposerRenderWhenListIsExpanded:!0})}f=v[0];l=p(c);C=B===0&&t.hasMoreInDirection({depth:B,direction:"forward",state:c,totalCount:o})&&!c.commentPages.some(function(a){return a.state==="VISIBLE"});if(!C&&x){var T=!1,U=babelHelpers["extends"]({},R.visibleStates),ha=[],V=[];z=(S?[].concat(v).reverse():v).map(function(a){if(!T&&a.state==="VISIBLE"){T=!0;R.commentIDs.forEach(function(a){U[a]==="VISIBLE"?(delete U[a],V.push(a)):ha.push(a)});return babelHelpers["extends"]({},a,{commentIDs:S?[].concat(a.commentIDs,V.reverse(),[Q]):[Q].concat(V,a.commentIDs)})}return T?babelHelpers["extends"]({},a,{afterCount:S?a.afterCount+1+V.length:a.afterCount,beforeCount:S?a.beforeCount:a.beforeCount+1+V.length}):a});w=babelHelpers["extends"]({},R,{commentIDs:ha,visibleStates:U});e=[Q].concat(d);if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:z,locallyComposedCommentIDs:e,newCommentsPage:w});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");A=a.args.minCountToShowCollapser;var W=t.getVisibleCommentsCount({depth:B,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:S?z.reverse():z,locallyComposedCommentIDs:e,newCommentsPage:w,repliesCollapser:h({count:W+1,expanded:y,minCountToShowCollapser:A}),repliesExpander:k,shouldComposerRenderWhenListIsExpanded:!0})}else if(C){e={commentPages:v.map(function(a,b){return b===0?babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1,hasPrevious:!0}):a}),locallyComposedCommentIDs:x?[Q].concat(d):d,newCommentsPage:babelHelpers["extends"]({},R,{commentIDs:[Q].concat(R.commentIDs),visibleStates:babelHelpers["extends"]({},R.visibleStates,(z={},z[Q]="VISIBLE",z))})};return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,e,{__type:"DEPTH_0"}):babelHelpers["extends"]({},c,e,{__type:"DEPTH_1"})}else if(l&&q(c)){w=v.map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1})});A=babelHelpers["extends"]({},R,{commentIDs:[Q].concat(R.commentIDs),visibleStates:babelHelpers["extends"]({},R.visibleStates,(W={},W[Q]="VISIBLE",W))});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:w,newCommentsPage:A});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");C=a.args.minCountToShowCollapser;x=t.getVisibleCommentsCount({depth:B,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:w,newCommentsPage:A,repliesCollapser:h({count:x+1,expanded:y,minCountToShowCollapser:C}),repliesExpander:k,shouldComposerRenderWhenListIsExpanded:!0})}else if(l&&R.commentIDs.length===0){d=u.backward!=null?babelHelpers["extends"]({},u,{backward:babelHelpers["extends"]({},u.backward,{count:Math.min(u.backward.count+1,r)})}):u;z=f.commentIDs.length<r;if(z){e=[babelHelpers["extends"]({},f,{commentIDs:[Q].concat(f.commentIDs)})].concat(v.slice(1).map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1})}));return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:e,pagers:d}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:e,pagers:d,repliesExpander:k})}W=[{__type:"COMMENTS_PAGE",afterCount:f.afterCount+f.commentIDs.length,beforeCount:0,commentIDs:[Q],hasNext:!0,hasPrevious:!1,state:"HIDDEN"},babelHelpers["extends"]({},f,{beforeCount:1,hasPrevious:!0})].concat(v.slice(1).map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1})}));return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:W,pagers:d}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:W,pagers:d,repliesExpander:k})}else{B=o<=m;w=B?v:v.map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1,hasPrevious:!0})});A=u.backward!=null?babelHelpers["extends"]({},u,{backward:babelHelpers["extends"]({},u.backward,{count:B?u.backward.count:Math.min(u.backward.count+1,r)})}):u;y=babelHelpers["extends"]({},R,{commentIDs:[Q].concat(R.commentIDs),visibleStates:babelHelpers["extends"]({},R.visibleStates,(x={},x[Q]="HIDDEN",x))});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:w,newCommentsPage:y,pagers:A}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:w,newCommentsPage:y,pagers:A,repliesExpander:k})}case"RECEIVE_REALTIME_COMMENT":var X=a.args.commentID;C=Object.prototype.hasOwnProperty.call(c.newCommentsPage.visibleStates,X)||c.commentPages.some(function(a){return a.commentIDs.includes(X)});if(!b("UFI2ViewOption").isChronologicalOrder(c.viewOption)){b("recoverableViolation")("Unable to receive realtime comment for non chronological ordering mode "+((l=c.viewOption)!=null?l:"(null ordering mode)"),"ufi2");return c}if(C)return c;z=t.getCommentsCount({depth:a.args.depth,state:c})===0;e=s(c).length===0;f=!a.args.hideCommentInPager&&z&&c.__type==="DEPTH_1";W=e&&!c.expanded;d=a.args.hideCommentInPager||!c.expanded&&!f||!z&&!q(c);o=!W&&d===!0&&!(e&&c.pagers.forward!=null);m=!W&&d&&!o;u={canViewerComment:c.canViewerComment,commentPages:c.commentPages.map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1,hasPrevious:!0})}),commentsByID:c.commentsByID,commentsHiddenByViewer:c.commentsHiddenByViewer,expanded:c.expanded||f,feedbackTargetID:c.feedbackTargetID,hasPaged:c.hasPaged,locallyComposedCommentIDs:c.locallyComposedCommentIDs,newCommentsPage:babelHelpers["extends"]({},c.newCommentsPage,{commentIDs:[X].concat(c.newCommentsPage.commentIDs),visibleStates:babelHelpers["extends"]({},c.newCommentsPage.visibleStates,(v={},v[X]=d?"HIDDEN":"VISIBLE",v))}),pagers:d?{backward:o?{__type:"PAGER",count:((u=(B=c.pagers)==null?void 0:(r=B.backward)==null?void 0:r.count)!=null?u:0)+1,direction:"backward",status:{error:(y=(x=c.pagers)==null?void 0:(w=x.backward)==null?void 0:w.status.error)!=null?y:null,pending:(l=(A=c.pagers)==null?void 0:(k=A.backward)==null?void 0:k.status.pending)!=null?l:!1}}:c.pagers.backward,forward:m?{__type:"PAGER",count:((e=(C=c.pagers)==null?void 0:(z=C.forward)==null?void 0:z.count)!=null?e:0)+1,direction:"forward",status:{error:(v=(W=c.pagers)==null?void 0:(f=W.forward)==null?void 0:f.status.error)!=null?v:null,pending:(r=(o=c.pagers)==null?void 0:(B=o.forward)==null?void 0:B.status.pending)!=null?r:!1}}:c.pagers.forward}:c.pagers,shouldComposerRenderWhenListIsExpanded:c.shouldComposerRenderWhenListIsExpanded,topLevelFeedbackTargetID:c.topLevelFeedbackTargetID,viewOption:c.viewOption};if(c.__type==="DEPTH_1"){return babelHelpers["extends"]({},c,u,{repliesCollapser:h({count:t.getVisibleCommentsCount({depth:a.args.depth,state:c})+(d?0:1),expanded:c.expanded,minCountToShowCollapser:b("UFI2CommentsConfig").minRepliesToToggleReplies}),repliesExpander:i({error:(y=(x=c.repliesExpander)==null?void 0:(w=x.status)==null?void 0:w.error)!=null?y:null,expanded:c.expanded,isLoading:(l=(A=c.repliesExpander)==null?void 0:(k=A.status)==null?void 0:k.pending)!=null?l:!1,totalCount:a.args.totalCount})})}return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,u):c;case"RECEIVE_REFETCH_LIST":m=a.args.depth;C=c.feedbackTargetID;z=c.topLevelFeedbackTargetID;e=c.viewOption;if(m!==0)throw b("unrecoverableViolation")("Expected depth to be 0 for RECEIVE_REFETCH_LIST","ufi2");if(!t.isListLoading({depth:m,state:c}))throw b("unrecoverableViolation")("Expected list to be loading","ufi2");W=n.getInitialState({args:babelHelpers["extends"]({},a.args,{depth:0,feedbackTargetID:C,initiallyExpanded:!0,topLevelFeedbackTargetID:z,viewOption:e}),state:null});if(W.__type!=="DEPTH_0")throw b("unrecoverableViolation")("Expected depth to be 0 for RECEIVE_REFETCH_LIST","ufi2");return babelHelpers["extends"]({},W,{__type:"DEPTH_0",expanded:c.expanded,status:{error:null,pending:!1}});case"REQUEST_COMMENTS_PAGE":f=a.args;v=f.depth;o=f.direction;B=f.pageSize;r=c.commentPages;d=c.expanded;x=c.newCommentsPage;w=c.pagers;if(!d)throw b("unrecoverableViolation")("Expected list to be expanded","ufi2");if(t.isPagerLoading({depth:v,direction:o,state:c}))throw b("unrecoverableViolation")("Cant request page if pager is loading","ufi2");if(v===0&&t.isListLoading({depth:v,state:c}))throw b("unrecoverableViolation")("Cant request page if list is loading","ufi2");if(v!==0&&t.isRepliesExpanderLoading({depth:v,state:c}))throw b("unrecoverableViolation")("Cant request page if replies expander is loading","ufi2");if(o==="backward"){y=r.findIndex(function(a){return a.state==="VISIBLE"});A=-1;if(y>-1){k=r[y];k.hasPrevious===!1&&b("FBLogger")("ufi2").mustfix("CometUFICommentList.updater(...): REQUEST_COMMENTS_PAGE - Can't request previous comments if there are no more comments available, feedbackID: %s",c.topLevelFeedbackTargetID);if(k.hasPrevious!==!0)throw b("unrecoverableViolation")("Can't request previous comments if there are no more comments available","ufi2");A=y-1}else y===-1&&r.length>0&&(A=0);l=r[A];u=p(c)&&aa(c,"HIDDEN");if(l&&l.state==="HIDDEN"){m=[].concat(r);m[A]=babelHelpers["extends"]({},l,{state:"VISIBLE"});C=babelHelpers["extends"]({},w,{backward:g({count:l.beforeCount,direction:"backward",error:null,hasMore:l.hasPrevious,isLoading:!1,pageSize:B})});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:m,hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:C,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");z=a.args.minCountToShowCollapser;e=t.getVisibleCommentsCount({depth:v,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:m,hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:C,repliesCollapser:h({count:e+l.commentIDs.length,expanded:c.expanded,minCountToShowCollapser:z}),shouldComposerRenderWhenListIsExpanded:!0})}else if(u){var ia={};x.commentIDs.forEach(function(a){ia[a]="VISIBLE"});W=babelHelpers["extends"]({},x,{visibleStates:ia});f=babelHelpers["extends"]({},w,{backward:null});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),newCommentsPage:W,pagers:f,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");d=a.args.minCountToShowCollapser;o=t.getVisibleCommentsCount({depth:v,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),newCommentsPage:W,pagers:f,repliesCollapser:h({count:o+W.commentIDs.length,expanded:c.expanded,minCountToShowCollapser:d}),shouldComposerRenderWhenListIsExpanded:!0})}else{k=babelHelpers["extends"]({},w,{backward:babelHelpers["extends"]({},w.backward,{status:{error:null,pending:!0}})});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:k}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:k})}}y=[].concat(r).reverse().findIndex(function(a){return a.state==="VISIBLE"});A=-1;if(y>-1){m=r.length-1-y;C=r[m];if(C.hasNext!==!0)throw b("unrecoverableViolation")("Can't request previous comments if there are no more comments available","ufi2");A=m+1}else y===-1&&r.length>0&&(A=r.length-1);e=r[A];if(e&&e.state==="HIDDEN"){l=[].concat(r);l[A]=babelHelpers["extends"]({},e,{state:"VISIBLE"});z=babelHelpers["extends"]({},w,{forward:g({count:e.afterCount,direction:"forward",error:null,hasMore:e.hasNext,isLoading:!1,pageSize:B})});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:l,hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:z,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");u=a.args.minCountToShowCollapser;x=t.getVisibleCommentsCount({depth:v,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:l,hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:z,repliesCollapser:h({count:x+e.commentIDs.length,expanded:c.expanded,minCountToShowCollapser:u}),shouldComposerRenderWhenListIsExpanded:!0})}else{f=babelHelpers["extends"]({},w,{forward:babelHelpers["extends"]({},w.forward,{status:{error:null,pending:!0}})});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:f}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:f})}case"REQUEST_REFETCH_LIST":o=a.args.depth;if(o!==0||c.__type!=="DEPTH_0")throw b("unrecoverableViolation")("Expected depth to be 0 for RECEIVE_REFETCH_LIST","ufi2");if(t.isListLoading({depth:o,state:c}))throw b("unrecoverableViolation")("Expected list to be loading","ufi2");return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:[],expanded:!0,hasPaged:{backward:!1,forward:!1},locallyComposedCommentIDs:[],newCommentsPage:{__type:"NEW_COMMENTS_PAGE",commentIDs:[],visibleStates:{}},pagers:{backward:null,forward:null},status:{error:null,pending:!0}});case"SET_CAN_VIEWER_COMMENT":W=a.args.canViewerComment;return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",canViewerComment:W}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",canViewerComment:W});case"SET_COMMENTS_BY_ID":d=a.args.commentsByID;return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsByID:d}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsByID:d});case"SET_SERVER_COMMENT_ID":k=a.args;var Y=k.clientCommentID,Z=k.serverCommentID;C=c.commentPages;m=c.locallyComposedCommentIDs;y=c.newCommentsPage;r=y.commentIDs.indexOf(Y);A=r!==-1;B=C.some(function(a){return a.commentIDs.some(function(a){return a===Y})});if(!A&&!B)return c;v=y.commentIDs.some(function(a){return a===Z});l=C.filter(function(a){return a.state==="HIDDEN"}).some(function(a){return a.commentIDs.some(function(a){return a===Z})});z=C.filter(function(a){return a.state==="VISIBLE"}).some(function(a){return a.commentIDs.some(function(a){return a===Z})});x=c;if(l){e=C.map(function(a){var b=a.commentIDs.indexOf(Z);if(b===-1)return a;else return babelHelpers["extends"]({},a,{commentIDs:[].concat(a.commentIDs.slice(0,b),a.commentIDs.slice(b+1))})});x.__type==="DEPTH_0"?x=babelHelpers["extends"]({},x,{__type:"DEPTH_0",commentPages:e}):x=babelHelpers["extends"]({},x,{__type:"DEPTH_1",commentPages:e})}if(v){u=m.filter(function(a){return a===Y});w=y.commentIDs.filter(function(a){return a!==Y});f=babelHelpers["extends"]({},y.visibleStates);delete f[Y];o=babelHelpers["extends"]({},y,{commentIDs:w,visibleStates:f});x.__type==="DEPTH_0"?x=babelHelpers["extends"]({},x,{__type:"DEPTH_0",locallyComposedCommentIDs:u,newCommentsPage:o}):x=babelHelpers["extends"]({},x,{__type:"DEPTH_1",locallyComposedCommentIDs:u,newCommentsPage:o})}if(A){W=babelHelpers["extends"]({},y.visibleStates);if(z||v){d=y.commentIDs.filter(function(a){return a!==Y});delete W[Y];k=babelHelpers["extends"]({},y,{commentIDs:d,visibleStates:W});x.__type==="DEPTH_0"?x=babelHelpers["extends"]({},x,{__type:"DEPTH_0",newCommentsPage:k}):x=babelHelpers["extends"]({},x,{__type:"DEPTH_1",newCommentsPage:k})}else{r=y.commentIDs.map(function(a){return a===Y?Z:a});W[Z]=W[Y];delete W[Y];l=babelHelpers["extends"]({},y,{commentIDs:r,visibleStates:W});x.__type==="DEPTH_0"?x=babelHelpers["extends"]({},x,{__type:"DEPTH_0",newCommentsPage:l}):x=babelHelpers["extends"]({},x,{__type:"DEPTH_1",newCommentsPage:l})}}if(B)if(z||v){e=C.map(function(a){var b=a.commentIDs.indexOf(Y);if(b===-1)return a;else return babelHelpers["extends"]({},a,{commentIDs:[].concat(a.commentIDs.slice(0,b),a.commentIDs.slice(b+1))})});x.__type==="DEPTH_0"?x=babelHelpers["extends"]({},x,{__type:"DEPTH_0",commentPages:e}):x=babelHelpers["extends"]({},x,{__type:"DEPTH_1",commentPages:e})}else{w=C.map(function(a){var b=a.commentIDs.indexOf(Y);if(b===-1)return a;else return babelHelpers["extends"]({},a,{commentIDs:[].concat(a.commentIDs.slice(0,b),[Z],a.commentIDs.slice(b+1))})});x.__type==="DEPTH_0"?x=babelHelpers["extends"]({},x,{__type:"DEPTH_0",commentPages:w}):x=babelHelpers["extends"]({},x,{__type:"DEPTH_1",commentPages:w})}f=m.map(function(a){return a===Y?Z:a});return x.__type==="DEPTH_0"?babelHelpers["extends"]({},x,{__type:"DEPTH_0",locallyComposedCommentIDs:f}):babelHelpers["extends"]({},x,{__type:"DEPTH_1",locallyComposedCommentIDs:f});case"UNHIDE_COMMENTS":u=a.args.commentIDs;o=c.commentsHiddenByViewer;var $=babelHelpers["extends"]({},o);u.forEach(function(a){delete $[a]});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsHiddenByViewer:$}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsHiddenByViewer:$});case"INITIAL_STATE":default:a.__type;throw b("unrecoverableViolation")("CometUFICommentListState: Invalid action type: "+a.__type,"ufi2")}}function m(a,c){try{var d=k(a,c);return d}catch(f){d=b("ErrorNormalizeUtils").normalizeError(f);d=d.message;var e=a.__type==="REQUEST_COMMENTS_PAGE"||a.__type==="RECEIVE_COMMENTS_PAGE"?a.args.direction:"Unknown";b("FBLogger")("ufi2").catching(f).addMetadata("UFI","COMMENTS_LIST_ACTION",a.__type).addMetadata("UFI","COMMENTS_LIST_DEPTH",""+a.args.depth).addMetadata("UFI","COMMENTS_LIST_DIRECTION",e).mustfix("CometUFICommentListState.updater(...): "+d);b("gkx")("676930")&&window.__enableUFI2CommentsListLogging===!0&&a.__type!=="SET_COMMENTS_BY_ID"&&console.groupEnd();if(!c)throw f;return c}}function a(a,b){return k(a,b)}function c(a,b){return k(a,b)}var n={collapseList:function(a){var b=a.args;a=a.state;return m({__type:"COLLAPSE_LIST",args:b},a)},deleteComment:function(a){var b=a.args;a=a.state;return m({__type:"DELETE_COMMENT",args:b},a)},expandHiddenComments:function(a){var b=a.args;a=a.state;return m({__type:"EXPAND_HIDDEN_COMMENTS",args:b},a)},expandList:function(a){var b=a.args;a=a.state;return m({__type:"EXPAND_LIST",args:b},a)},getInitialState:function(a){var b=a.args;a=a.state;return m({__type:"INITIAL_STATE",args:b},a)},hideComments:function(a){var b=a.args;a=a.state;return m({__type:"HIDE_COMMENTS",args:b},a)},receiveCommentsPage:function(a){var b=a.args;a=a.state;return m({__type:"RECEIVE_COMMENTS_PAGE",args:b},a)},receiveNewComment:function(a){var b=a.args;a=a.state;return m({__type:"RECEIVE_NEW_COMMENT",args:b},a)},receiveRealtimeComment:function(a){var b=a.args;a=a.state;return m({__type:"RECEIVE_REALTIME_COMMENT",args:b},a)},receiveRefetchList:function(a){var b=a.args;a=a.state;return m({__type:"RECEIVE_REFETCH_LIST",args:b},a)},requestCommentsPage:function(a){var b=a.args;a=a.state;return m({__type:"REQUEST_COMMENTS_PAGE",args:b},a)},requestRefetchList:function(a){var b=a.args;a=a.state;return m({__type:"REQUEST_REFETCH_LIST",args:b},a)},setCanViewerComment:function(a){var b=a.args;a=a.state;return m({__type:"SET_CAN_VIEWER_COMMENT",args:b},a)},setCommentsByID:function(a){var b=a.args;a=a.state;return m({__type:"SET_COMMENTS_BY_ID",args:b},a)},setServerCommentID:function(a){var b=a.args;a=a.state;return m({__type:"SET_SERVER_COMMENT_ID",args:b},a)},unhideComments:function(a){var b=a.args;a=a.state;return m({__type:"UNHIDE_COMMENTS",args:b},a)}};function o(a){var b=a.direction;a=a.state;b=b==="forward"?[].concat(a.commentPages).reverse():a.commentPages;return b.find(function(a){return a.state==="VISIBLE"})}function p(a){var b=a.commentPages;a=a.newCommentsPage;b=b[0];return!b?a.commentIDs.length>0:b.beforeCount-a.commentIDs.length===0}function q(a){var b=a.commentPages;b=b[0];return!b?p(a)&&r(a,"VISIBLE"):p(a)&&b.state==="VISIBLE"&&r(a,"VISIBLE")}function aa(a,b){var c=a.newCommentsPage;return c.commentIDs.some(function(a){return c.visibleStates[a]===b})}function r(a,b){var c=a.newCommentsPage;return c.commentIDs.every(function(a){return c.visibleStates[a]===b})}function s(a){var c=a.__type,d=a.commentPages,e=a.newCommentsPage;a=a.viewOption;c=c==="DEPTH_1"&&!b("UFI2ViewOption").isChronologicalOrder(a);a=d.filter(function(a){return a.state==="VISIBLE"}).reduce(function(a,b){return a.concat(b.commentIDs)},[]);d=e.commentIDs.filter(function(a){return e.visibleStates[a]==="VISIBLE"});return c?[].concat(a,d.reverse()):[].concat(d,a)}var t={canFetchInDirection:function(a){var b=a.depth,c=a.direction,d=a.state;a=a.totalCount;if(a===0)return!1;a=d.commentPages;var e=d.newCommentsPage,f=t.isPagerLoading({depth:b,direction:c,state:d});if(f)return!1;f=b===0&&t.isListLoading({depth:b,state:d});if(f)return!1;f=b!==0&&t.isRepliesExpanderLoading({depth:b,state:d});if(f)return!1;if(a.length===0&&c==="forward")return!0;else if(a.length===0&&c==="backward")return!1;f=a[0];a=a[a.length-1];b=t.getPagerCount({depth:b,direction:"backward",state:d});b=b===e.commentIDs.length&&r(d,"HIDDEN");return c==="backward"?f.state!=="HIDDEN"&&!b&&f.hasPrevious:a.state!=="HIDDEN"&&a.hasNext},getCommentsCount:function(a){a.depth;a=a.state;var b=a.commentPages;a=a.newCommentsPage;return a.commentIDs.concat(b.reduce(function(a,b){return a.concat(b.commentIDs)},[])).length},getCountForFetch:function(a){var c=a.depth,d=a.direction,e=a.pageSize;a=a.state;d=t.getPagerCount({depth:c,direction:d,state:a});if(d!=null)return d;if(c!==0){if(e==null)throw b("unrecoverableViolation")("CometUFICommentListState.getCountForFetch(...): Expected pageSize to compute fetch count for expanding replies","ufi2");d=t.getRepliesExpanderCount({depth:c,state:a});if(d!=null)return Math.min(d,e)}return null},getHiddenStateForComment:function(a){var b=a.commentID;a.depth;a=a.state;a=a.commentsHiddenByViewer;return a[b]||null},getPagerCount:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return null;a=a[b];return a!=null?a.count:null},getPagerError:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return null;a=a[b];return a!=null?a.status.error:null},getRepliesCollapserCount:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return null;b=a.repliesCollapser;return b!=null?b.count:null},getRepliesExpanderCount:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return null;b=a.repliesExpander;return b!=null?b.count:null},getRepliesExpanderError:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return null;b=a.repliesExpander;return b!=null?b.status.error:null},getVisibleComments:function(a){a.depth;a=a.state;var c=a.commentsByID,d=a.locallyComposedCommentIDs,e=a.newCommentsPage,f=a.viewOption;a=s(a);var g=a.map(function(a){var d=c[a];if(!d){b("FBLogger")("ufi2").warn("CometUFICommentListState.getVisibleComments: Could not find comment locally: %s",a);return null}return d}).filter(Boolean);a.length>0&&g.length===0&&b("FBLogger")("ufi2").warn("CometUFICommentListState.getVisibleComments: Could not find ANY of the %s comments locally",a.length);return!d.length&&e.commentIDs.length>0&&b("UFI2ViewOption").isChronologicalOrder(f)?g.sort(function(a,b){return((b=b.created_time)!=null?b:0)-((b=a.created_time)!=null?b:0)}):g},getVisibleCommentsCount:function(a){a.depth;a=a.state;return s(a).length},getVisibleCommentsGroupedByCollapsedState:function(a){var b=a.depth,c=a.reverse,d=a.shouldCollapseComment;a=a.state;b=t.getVisibleComments({depth:b,state:a});a=c?b.slice().reverse():b;return a.reduce(function(a,b){var c=d(b)?"COLLAPSED":"VISIBLE";if(a.length===0)return[{comments:[b],state:c}];var e=a[a.length-1],f=e.comments[e.comments.length-1];if(!f)return a;f=e.state;if(f===c){e.comments.push(b);return a}return[].concat(a,[{comments:[b],state:c}])},[])},getVisibleCommentsWithHiddenCommentsCollapsed:function(a){var b=a.depth,c=a.reverse,d=a.state;return t.getVisibleCommentsGroupedByCollapsedState({depth:b,reverse:c,shouldCollapseComment:function(a){return t.getHiddenStateForComment({commentID:a.id,depth:b,state:d})==="COLLAPSED"},state:d})},hasLastPageLeftInDirection:function(a){a.depth;var b=a.direction,c=a.pageSize,d=a.state;a=a.totalCount;d=o({direction:b,state:d});if(!d)return b==="forward"?a<=c:!1;return b==="forward"?d.afterCount<=c:d.beforeCount<=c},hasMoreInDirection:function(a){a.depth;var b=a.direction,c=a.state;a=a.totalCount;c=o({direction:b,state:c});if(!c)return b==="forward"?a>0:!1;return b==="forward"?c.hasNext:c.hasPrevious},hasPagedInDirection:function(a){a.depth;var b=a.direction;a=a.state;a=a.hasPaged;return a[b]},hasVisibleComments:function(a){var b=a.depth;a=a.state;return t.getVisibleComments({depth:b,state:a}).length>0},isComposerVisible:function(a){a.depth;a=a.state;return a.canViewerComment&&a.expanded&&a.shouldComposerRenderWhenListIsExpanded},isListExpanded:function(a){a.depth;a=a.state;return a.expanded},isListLoading:function(a){var b=a.depth;a=a.state;return b!==0||a.__type!=="DEPTH_0"?!1:a.status.pending},isPagerLoading:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return!1;a=a[b];return a!=null?a.status.pending:!1},isPagerVisible:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return!1;a=a[b];return a!=null},isRepliesCollapserVisible:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return!1;b=a.repliesCollapser;return b!=null},isRepliesExpanderLoading:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return!1;b=a.repliesExpander;return b!=null?b.status.pending:!1},isRepliesExpanderVisible:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return!1;b=a.repliesExpander;return b!=null},pagerHasRealtimeComments:function(a){var b=a.direction;a=a.state;var c=Object.values(a.newCommentsPage.visibleStates).find(function(a){return a==="HIDDEN"})!=null;return b==="forward"?a.pagers.backward==null?c:!1:c}};e.exports={_updaterDepth0_DO_NOT_USE:a,_updaterDepth1_DO_NOT_USE:c,Selectors:t,StateUpdaters:n}}),null);
__d("CometUFICommentsProviderState",["FBLogger","gkx","isUFI2ClientID"],(function(a,b,c,d,e,f){"use strict";function g(a){return a!=null&&(a.is_locally_composed===!0||a.is_created_from_subscription===!0||a.optimistic_error!=null||a.optimistic_action!=null)}function h(a){return!a||a.spam_display_mode==null?!1:(a==null?void 0:a.spam_display_mode)!=="none"}function a(a){a=(a=a.feedback.display_comments)==null?void 0:a.before_count;return typeof a==="number"?a:null}function i(a){return a.filter(function(a){return b("isUFI2ClientID")(a)})}function j(a){var c={};a=a?a.map(function(a){if(!a){b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getCommentsFromEdges(...): Received null edge from comments connection.");return null}a=a.node;if(!a){b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getCommentsFromEdges(...): Received null comment from comments connection.");return null}if(a.id!=null){var d=a.id;c[d]=a;return d}else{b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getCommentsFromEdges(...): Received comment with null id from comments connection.");return null}}).filter(Boolean):[];if(a.length>Object.keys(c).length){b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getCommentsFromEdges(...): Received duplicate comments from comments connection");var d=new Set();return{commentIDs:a.filter(function(a){if(d.has(a))return!1;d.add(a);return!0}),commentsByID:c}}return{commentIDs:a,commentsByID:c}}function k(a,c){var d=Object.keys(a),e=Object.keys(c),f=d.length,g=e.length;if(g>=f)return[];e.every(function(b){return Object.prototype.hasOwnProperty.call(a,b)})||b("FBLogger")("ufi2").warn("CometUFICommentsProvider: Expected next comments to be a subset of previous comments when removing a comment");g=d.filter(function(a){return!Object.prototype.hasOwnProperty.call(c,a)});return g}function l(a,c,d,e){var f=[];d=a.filter(function(a){return!b("isUFI2ClientID")(a)});var g=function(){if(i){if(j>=h.length)return"break";a=h[j++]}else{j=h.next();if(j.done)return"break";a=j.value}var b=a,d=e[b],g=d&&d.client_id!=null?d.client_id:null;g!=null&&c.find(function(a){return a===g})&&f.push({clientID:g,serverID:b})};for(var h=d,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){d=g();if(d==="break")break}return f}function m(a,c,d){if(d.length<=c.length)return[];var e=a[d[0]];if(!e){b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getNewlyCreatedCommentIDs(...): Next most recent comment not found");return[]}e=c.filter(function(b){return g(a[b])});c=d.filter(function(b){return g(a[b])});d=c.length-e.length>0;if(!d)return[];if(e.length===0)return c;var f=new Set(e);return c.filter(function(a){return!f.has(a)})}function n(a,b){return b.filter(function(b){b=a[b];return b!=null&&h(b)})}function o(a,b,c){return c.filter(function(c){var d=a[c];c=b[c];return d!=null&&h(d)===!1&&h(c)===!0})}function p(a,b,c){return c.filter(function(c){var d=a[c];c=b[c];return d!=null&&h(d)===!0&&h(c)===!1})}function c(a,c){var d=a.depth,e=c.commentsByID,f=c.commentIDs;a=j(a.edges);var g=a.commentIDs;a=a.commentsByID;var h=f.length,q=c.clientCommentIDs,r=g.length,s=i(g),t=c.selectedViewOption;c=c.isRefetchingConnection;var u=n(a,g),v=o(e,a,g),w=p(e,a,g);q=l(g,q,s,a);var x=r>h;h=h>r;r=x?m(a,f,g):[];x=h&&!c;f=x?k(e,a):[];h={clientCommentIDs:s,commentIDs:g,commentIDsUpdatedToServerIDs:q,commentsByID:a,hiddenCommentIDs:u,isRefetchingConnection:c,newlyCreatedCommentIDs:r,newlyHiddenCommentIDs:v,newlyUnhiddenCommentIDs:w,removedCommentIDs:f,selectedViewOption:t};b("gkx")("676930")&&window.__enableUFI2CommentsListLogging===!0&&(console.groupCollapsed("%cUFI2 Relay Comments Connection Update at depth "+d+":",";background-color:#75DBCD;color:#1F2D3D;opacity:0.7;font-weight:bold;"),console.groupEnd());return h}function d(a){a=a.edges;a=j(a);var b=a.commentIDs;a=a.commentsByID;var c=i(b),d=n(a,b);return{clientCommentIDs:c,commentIDs:b,commentIDsUpdatedToServerIDs:[],commentsByID:a,hiddenCommentIDs:d,isRefetchingConnection:!1,newlyCreatedCommentIDs:[],newlyHiddenCommentIDs:[],newlyUnhiddenCommentIDs:[],removedCommentIDs:[],selectedViewOption:null}}e.exports={getBeforeCount:a,getClientCommentIDs:i,getCommentIDsUpdatedToServerIDs:l,getCommentsFromEdges:j,getDerivedStateFromProps:c,getHiddenCommentIDs:n,getInitialState:d,getNewlyCreatedCommentIDs:m,getNewlyHiddenCommentIDs:o,getNewlyUnhiddenCommentIDs:p,getRemovedCommentIDs:k}}),null);
__d("useCometUFICodedErrorDialog",["CometPlaceholder.react","JSResource","React","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=b("React");var h=c.useCallback,i=c.useState,j=b("lazyLoadComponent")(b("JSResource")("CometUFICodedErrorDialog.react").__setRef("useCometUFICodedErrorDialog"));function a(){var a=i(null),c=a[0],d=a[1];a=h(function(a){a.code!=null&&d(a)},[d]);var e=h(function(){return d(null)},[d]);return c==null?{errorDialog:null,setError:a}:{errorDialog:g.jsx(b("CometPlaceholder.react"),{fallback:g.jsx(g.Fragment,{}),children:g.jsx(j,{error:c,onClose:e})}),setError:a}}e.exports=a}),null);
__d("useTrackingCodeFnForComet",["React","useCometTrackingCodeForMutationProperties"],(function(a,b,c,d,e,f){"use strict";a=b("React");var g=a.useCallback;c=function(){var a=b("useCometTrackingCodeForMutationProperties")(),c=g(function(){return a},[a]);return c};e.exports=c}),null);
__d("useCometUFISubscriptionManager",["JSScheduler","React","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";c=b("React");var g=c.useCallback,h=c.useRef;function a(){var a=h(new Set()),c=h(new Set()),d=h(!1),e=g(function(b){a.current.add(b);d.current&&b.subscribe();return{dispose:function(){b.unsubscribe(),a.current["delete"](b)}}},[]),f=g(function(){d.current||(d.current=!0,a.current.forEach(function(a){var e=b("JSScheduler").scheduleSpeculativeCallback(function(){!d.current?b("recoverableViolation")("Scheduled callback to activate subscription was not canceled","ufi2"):(c.current["delete"](e),a.subscribe())});c.current.add(e)}))},[]),i=g(function(){d.current&&(d.current=!1,a.current.forEach(function(a){return a.unsubscribe()}),c.current.forEach(function(a){return b("JSScheduler").cancelCallback(a)}),c.current.clear())},[]);return[e,f,i]}e.exports=a}),null);
__d("CometUFIRealtimeRoot.react",["React","UFI2RealtimeContext","useCometUFISubscriptionManager"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=b("React");var h=c.useEffect;function a(a){var c=a.children;a=a.enabled;var d=a===void 0?!0:a;a=b("useCometUFISubscriptionManager")();var e=a[0],f=a[1],i=a[2];h(function(){if(d){f();return function(){i()}}},[d,f,i]);return g.jsx(b("UFI2RealtimeContext").Provider,{value:e,children:c})}e.exports=a}),null);
__d("CometFeedUFIRenderer.react",["CometListItemGlimmer.react","CometRefineRef","CometRelay","CometUFICommentListRenderer.react","CometUFIRealtimeRoot.react","CometUFISummaryAndActions.react","CometUFIVisibilityContext","FBLogger","React","stylex","useVisibilityObserver","CometFeedUFIRenderer_feedback.graphql","CometFeedUFIRenderer_shareable.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h;b("CometRelay").graphql;var i=b("CometRelay").useFragment,j=b("React");c=b("React");var k=c.useCallback,l=c.useRef,m=c.useState;function a(a,c){var d=a.displayCommentsContext,e=a.feedLocation,f=a.feedback,n=a.feedbackSource,o=a.focusCommentID,p=a.isTextOnlyStory,q=a.onActorSelected,r=a.shareable;a=a.storyRenderLocation;var s=i(g!==void 0?g:g=b("CometFeedUFIRenderer_feedback.graphql"),f);f=i(h!==void 0?h:h=b("CometFeedUFIRenderer_shareable.graphql"),r);var t=l();r=k(function(){var a=t.current;a!=null&&a.Actions.toggleList({focusComposer:!1})},[]);var u=k(function(){var a=t.current;a!=null?a.Actions.expandList({focusComposer:!0,scrollToComposer:!0}):b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",(s==null?void 0:s.id)||"UNKNOWN").mustfix("The 'comment' button was clicked but no comments list ref could be found. That ref is needed to make sure the comments list is open.")},[s]),v=m(!0),w=v[0],x=v[1];v=b("useVisibilityObserver")({onHidden:k(function(){return x(!1)},[]),onVisible:k(function(){return x(!0)},[])});return j.jsx(b("CometUFIRealtimeRoot.react"),{enabled:s.is_eligible_for_real_time_updates===!0,children:j.jsx(b("CometUFIVisibilityContext").Provider,{value:w,children:j.jsxs("div",{ref:v,children:[j.jsx(b("CometUFISummaryAndActions.react"),{feedLocation:e,feedback:s,feedbackSource:n,isTextOnlyStory:p,onActorSelected:q,onClickCommentsCount:r,onCommentClick:u,ref:c,shareable:(w=f)!=null?w:null}),j.jsx(b("CometUFICommentListRenderer.react"),{displayCommentsContext:d,fallback:j.jsx("div",{className:"hbnzryc0","data-testid":void 0,children:j.jsx(b("CometListItemGlimmer.react"),{imageSize:36,imageStyle:"circle",numberOfItems:4})}),feedLocation:e,feedback:s,feedbackSource:n,focusCommentID:o,listRef:b("CometRefineRef")(t),storyRenderLocation:a})]})})})}e.exports=j.forwardRef(a)}),null);
__d("CometFeedUFI.react",["requireDeferred","CometFeedUFIRenderer.react","CometRelay","React","CometFeedUFI_feedback.graphql","CometFeedUFI_shareable.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h;b("CometRelay").graphql;var i=b("CometRelay").useFragment,j=b("React");c=b("requireDeferred")("UFIReactionsAnimationPreloader");c.onReady(function(a){return new a().preloadAll()});function a(a,c){var d=a.displayCommentsContext,e=a.feedback,f=a.feedbackSource,k=a.feedLocation,l=a.focusCommentID,m=a.isTextOnlyStory,n=a.onActorSelected;a=a.shareable;e=i(g!==void 0?g:g=b("CometFeedUFI_feedback.graphql"),e);a=i(h!==void 0?h:h=b("CometFeedUFI_shareable.graphql"),a);return j.jsx(b("CometFeedUFIRenderer.react"),{displayCommentsContext:(d=d)!=null?d:{},feedLocation:k,feedback:e,feedbackSource:f,focusCommentID:l,isTextOnlyStory:m,onActorSelected:n,ref:c,shareable:(d=a)!=null?d:null,storyRenderLocation:"newsstand"},(f=e==null?void 0:(k=e.viewer_actor)==null?void 0:k.id)!=null?f:"UNKNOWN")}e.exports=j.memo(j.forwardRef(a))}),null);
__d("HCMHeroVideoPlayer.react",["GenericCometInBlueHeroVideoPlayerWrapper.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return this.props.videoID==null?null:g.jsx(b("GenericCometInBlueHeroVideoPlayerWrapper.react"),{playerOrigin:"search",playerSubOrigin:"search_live_video_module",reactionVideoChannelType:"video_home_www_live_hero",videoID:this.props.videoID})};return c}(g.Component);e.exports=a}),null);
__d("ProfileLiveVideoRing.react",["cx","fbt","FlexLayout.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(){return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"_8rr6"}),i.jsx(b("FlexLayout.react"),{className:"_8rr7",children:i.jsx(b("FlexLayout.react"),{align:"center",className:"_7wu5",children:h._("LIVE")})})]})}e.exports=a}),null);
__d("SearchBootstrapEntityModuleDebugUtil",["Arbiter","BanzaiODS"],(function(a,b,c,d,e,f){"use strict";({backend_faster_no_matches:"BEM not shown because backend returned faster but had no matches anyway",backend_faster_with_matches:"BEM had matches but backend was faster",no_matches:"BEM not shown as no matches were found",shown:"BEM shown"});a={printDebugNotice:function(a,c,d,e){d=e!=null&&e.length>0;e=d?"has_preloaded_entity_ids":"without_preloaded_entity_ids";b("BanzaiODS").bumpEntityKey(2966,"search.www."+a,c+"."+e)}};e.exports=a}),null);
__d("SearchBootstrapEntityModuleUtil",["cx","fbt","DOM","FacebarJSConstants","SearchBootstrapEntityModuleUIConfig","SearchEntityModuleServerConstants","URI","immutable","md5","randomInt"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("immutable").Map(),k=new RegExp("^/(search/top|search/str.+/keywords_(top|search))"),l=new RegExp("^/(search|topic/trending)"),m=new RegExp("^/search/str/([^/]+)/");function a(a){var b;switch(a){case"user":b=h._("People");break;case"page":b=h._("Pages");break;case"group":b=h._("Groups");break;case"app":b=h._("Apps");break;case"place":b=h._("Places");break;case"event":b=h._("Events");break}return b}function n(a){if(a.subtext==null)return[];if(a.browse_type==="browse_type_tv_show")return[b("DOM").create("span",{},[b("DOM").create("span",{className:"_2vo8"},h._("SHOW")),a.subtext])];a=a.subtext.split(/\s*\u00B7s*/g).map(function(a){return b("DOM").create("span",{},a)});var c=a.pop();a=a.slice(0,b("SearchBootstrapEntityModuleUIConfig").numSnippetsToShow-1);c!=null&&a.push(c);return a}function c(a,c){a=a.filter(function(a){return a.type!==b("FacebarJSConstants").keywordType}).sort(function(a,b){return a.bootstrapCost-b.bootstrapCost});var d=a[0],e;d!=null&&(e=d.type);a=a.filter(function(a){return a.type===e}).slice(0,b("SearchBootstrapEntityModuleUIConfig").numBootstrapResultsToShow);return a.map(function(a){return o(a,c)})}function o(a,c){var d=a.tuid,e=a.path,f=a.text,g=a.photo,h=a.photos,j=a.is_inactive,k=a.is_verified,l=a.hcm_match_criteria,m=a.show_hcm_experience,o=p(a);return{tuid:d,uri:new(i||(i=b("URI")))(e).addQueryData("ref",b("SearchEntityModuleServerConstants").BROWSE_RESULTS_PAGE_REF),type:o,text:f,photo:g,photos:h,snippets:n(a),module_role:b("SearchEntityModuleServerConstants").RESULT_TYPE_TO_MODULE_ROLE[o],is_bootstrap:!0,is_inactive:(d=j)!=null?d:!1,is_verified:k,logging_unit_id:q(c,a),is_currently_live:!1,is_gaming_page:!1,hcm_match_criteria:l,show_hcm_experience:m}}function p(a){var b;a.render_type==="place"?b="place":b=a.type;return b}function d(a,c){return new(i||(i=b("URI")))(b("SearchEntityModuleServerConstants").TYPE_TO_SERP_PATH[p(a[0])]).addQueryData({q:c})}function q(a,c){var d=j.get(a);d==null&&(d=b("immutable").Map(),j.set(a,d));a=d.get(c.tuid);a==null&&(a=r("www_bem_res"),d.set(c.tuid,a));return a}function r(a){return a+":"+b("md5")(String(b("randomInt")(0,Number.MAX_SAFE_INTEGER)))}function s(a){return a.getPath().match(l)!=null}function f(a){var b=a.getQueryData();return b.filters!=null?!1:a.getPath().match(k)!=null}function g(a){if(!s(a))return null;var b=a.getQueryData();if(b.q!=null)return b.q;b=a.getPath();a=b.match(m);return a!=null?decodeURIComponent(a[1]).replace(/\+/g," "):null}e.exports={getTitleForResultType:a,getSnippetForRawBootstrapResult:n,transformRawBootstrapResultsToEntityModuleResults:c,getSeeMoreURIForResults:d,generateUnitIDWithPrefix:r,getQueryFromURI:g,isSERPURI:s,isTopTabURI:f}}),null);
__d("SearchEntityResult.react",["cx","LineClamp.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React"),i=2,j=2,k=2,l=2,m=1,n=20,o=18;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(){return this.props.snippets[0]==null?null:h.jsx(b("LineClamp.react"),{fitHeightToShorterText:!0,lines:j,className:"_6v_1",lineHeight:o,children:this.props.snippets[0]})};d.$2=function(){return this.props.snippets[1]==null&&this.props.snippets[2]==null?null:h.jsxs("div",{className:"_73ko",children:[h.jsx(b("LineClamp.react"),{fitHeightToShorterText:!0,lines:k,lineHeight:o,children:this.props.snippets[1]}),h.jsx(b("LineClamp.react"),{fitHeightToShorterText:!0,lines:l,lineHeight:o,children:this.props.snippets[2]})]})};d.$3=function(){return this.props.snippets[3]==null?null:h.jsx("div",{className:"_6v_d",children:h.jsx(b("LineClamp.react"),{fitHeightToShorterText:!0,lines:m,lineHeight:o,children:this.props.snippets[3]})})};d.render=function(){return h.jsxs("div",{className:"_77we",children:[this.props.image,h.jsxs("div",{className:"_6v_9",children:[h.jsxs("div",{className:"_6v_a",children:[h.jsxs("div",{className:"_6v-_",children:[h.jsx(b("LineClamp.react"),{fitHeightToShorterText:!0,className:"_6v_0",lines:i,lineHeight:n,children:this.props.title}),this.$1()]}),this.props.actions!=null?h.jsx("div",{className:"_6v_2",children:this.props.actions}):null]}),h.jsxs("div",{className:"_6v_b",children:[this.$2(),this.$3()]})]})]})};return c}(h.Component);e.exports=a}),null);
__d("SearchProfileResultConstants",[],(function(a,b,c,d,e,f){"use strict";e.exports={PROFILE_PICTURE_SIZE:72}}),null);
__d("SearchSnippetsHighlighter",["csx","NodeHighlighter","concatMap","mayHaveConnectedCharacters"],(function(a,b,c,d,e,f,g){"use strict";var h=babelHelpers["extends"]({},b("NodeHighlighter"),{getHighlightCandidates:function(){return["._glo","._glm","._l1a","._6v_9"]},highlight:function(a,c){var d=this;if(c.some(b("mayHaveConnectedCharacters")))return;var e=b("concatMap")(function(c){return b("concatMap")(d.getTextNodes.bind(d),d.searchNodes(a,c))},this.getHighlightCandidates());for(var e=e,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(g>=e.length)break;i=e[g++]}else{g=e.next();if(g.done)break;i=g.value}i=i;if(i.parentNode==null)return}b("NodeHighlighter").highlight.call(h,a,c)}});e.exports=h}),null);
__d("WorkFeatureAccessControl",["WorkCompanyEnabledFeatures"],(function(a,b,c,d,e,f){"use strict";e.exports={isFeatureAllowed:function(a){return b("WorkCompanyEnabledFeatures").features.includes(a)},arePaidFeaturesAllowed:function(){return b("WorkCompanyEnabledFeatures").features.includes("paid_base")},accessResponse:function(a){if(b("WorkCompanyEnabledFeatures").features.includes(a))return"allowed";else return"feature_not_available"},allowedFeatures:b("WorkCompanyEnabledFeatures").features}}),null);
__d("XSearchBrowseActionsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/search/async/browse_actions/",{id:{type:"String",required:!0},result_type:{type:"String",required:!0},session_id:{type:"String",required:!0},query:{type:"String",required:!0},logging_unit_id:{type:"String",required:!0},actions_id:{type:"String"}})}),null);
__d("SearchProfileResult.react",["cx","fbt","AsyncRequest","Badge.react","CurrentUser","DOM","DOMContainer.react","HCMHeroVideoPlayer.react","Image.react","Link.react","PageRatingConfig","PageRecommendationsCircleScore.react","PageRecommendationsCircleScoreType","ProfileLiveVideoRing.react","React","SearchEntityModuleServerConstants","SearchEntityResult.react","SearchProfileResultConstants","SearchResultPageExperiments","SearchSnippetsHighlighter","TrackingNodes","WorkFeatureAccessControl","XSearchBrowseActionsController","XUIButton.react","XUISpinner.react","memoize","uniqueID"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=b("PageRecommendationsCircleScoreType").SEARCH_RESULT_LARGE;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={actionsLoaded:!1,actionsWrapper:b("DOM").create("div",{id:b("uniqueID")()})},d.$1=null,d.getLoggingData=b("memoize")(function(){var a=b("SearchEntityModuleServerConstants").WWW_GRAPH_SEARCH_RESULTS_TRACKABLE_CODE;a=a+JSON.stringify({session_id:d.props.sessionID,unit_id:d.props.loggingUnitID,unit_id_click_type:"graph_search_results_item_in_module_tapped",unit_id_result_id:d.props.id,module_type:d.props.module_role});return{"data-ft":b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.BROWSE_RESULT),"data-gt":JSON.stringify({type:"xtracking",xt:a}),"data-xt":a,"data-xt-vimp":JSON.stringify(d.props.client_view_config),"data-vistracking":"1"}}),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.fetchAsyncActions()};d.getTitleTrackingInfo=function(){return this.props.type==="user"?{"data-ft":b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.PROFILE_LINK)}:null};d.getPhotoTrackingInfo=function(){return this.props.type==="user"?{"data-ft":b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.USER_PROFILE_PIC)}:null};d.render=function(){var a=this,c=this.props,d=c.profileURI,e=c.isInActive,f=c.officialStatus,g=c.isVerified,j=c.isWorkForeignEntity,k=c.snippets;c=c.text;var l;g===!0?l=i.jsx(b("Badge.react"),{type:"verified",size:"small"}):f==="OFFICIAL"&&b("WorkFeatureAccessControl").isFeatureAllowed?l=i.jsx(b("Badge.react"),{type:"work_official_badge",size:"small"}):e?l=i.jsx(b("Badge.react"),{type:"inactive_user",size:"small"}):j&&(l=i.jsx(b("Badge.react"),{type:"work_non_coworker"}));g=k.map(function(c,d){if(!(c instanceof HTMLElement))return c;a.props.matchWords!=null&&b("SearchSnippetsHighlighter").highlight(c,a.props.matchWords);return i.jsx(b("DOMContainer.react"),{children:c},"snippet_"+d)});var m;f=this.state.actionsWrapper;f!=null&&(m=i.jsxs(i.Fragment,{children:[i.jsx(b("DOMContainer.react"),{children:f}),i.jsx(b("XUIButton.react"),{className:"_4cei"+(this.state.actionsLoaded?" hidden_elem":""),image:i.jsx(b("XUISpinner.react"),{size:"small",background:"dark"}),label:h._("Loading...")})]}));j=i.jsxs(b("Link.react"),babelHelpers["extends"]({className:e?"_7b-6":"",href:d},this.getTitleTrackingInfo(),{children:[c,l]}));return i.jsxs("div",babelHelpers["extends"]({className:"_401d _2nuh"},this.getLoggingData(),{children:[i.jsx(b("SearchEntityResult.react"),{title:j,actions:m,image:this.renderProfileImage(),snippets:g}),i.jsx("div",{children:this.getHCMHeroVideo()})]}))};d.getHCMHeroVideo=function(){var a=this.props.videoID;if(a!==null)return i.jsx("div",{children:i.jsx(b("HCMHeroVideoPlayer.react"),{videoID:a})})};d.fetchAsyncActions=function(){var a=this;if(!b("CurrentUser").isLoggedIn()){this.setState({actionsLoaded:!0});return}var c=b("XSearchBrowseActionsController").getURIBuilder().setString("id",this.props.id).setString("result_type",b("SearchEntityModuleServerConstants").TYPE_TO_BROWSE_TYPE[this.props.type]).setString("session_id",this.props.sessionID).setString("query",this.props.query).setString("logging_unit_id",this.props.loggingUnitID);c=new(b("AsyncRequest"))(c.getURI()).setData({actions_id:this.state.actionsWrapper.id}).setMethod("POST").setHandler(function(b){b=a.state.actionsWrapper;if(b==null){a.setState({actionsLoaded:!0});return}a.setState({actionsLoaded:!0})}).setAllowCrossPageTransition(!0);this.$1=c;c.send()};d.renderProfileImage=function(){var a=this.props,c=a.photoURI,d=a.profileURI,e=a.shouldShowLiveBadge,f=a.text;a=a.type;c=i.jsx(b("Image.react"),{className:"_6xu4"+(b("SearchResultPageExperiments").entityTypeHasRoundedProfileImageMap[a]?" _6xu5":""),src:c,width:b("SearchProfileResultConstants").PROFILE_PICTURE_SIZE,height:b("SearchProfileResultConstants").PROFILE_PICTURE_SIZE,alt:f});if(e)return i.jsx("div",{children:i.jsx("div",{className:"_6xu6",children:i.jsxs(b("Link.react"),babelHelpers["extends"]({"aria-hidden":!0,href:d,tabIndex:-1},this.getPhotoTrackingInfo(),{children:[c,i.jsx(b("ProfileLiveVideoRing.react"),{})]}))})});return a==="place"&&b("PageRatingConfig").show_rating_circle?i.jsx("div",{children:i.jsxs("div",{className:"_6xu6",children:[i.jsx(b("Link.react"),{"aria-hidden":!0,href:d,tabIndex:-1,children:c}),i.jsx(b("PageRecommendationsCircleScore.react"),{pageIDString:this.props.id,scoreType:j})]})}):i.jsx(b("Link.react"),babelHelpers["extends"]({"aria-hidden":!0,className:"_6xu6",tabIndex:-1,href:d},this.getPhotoTrackingInfo(),{children:c}))};d.componentWillUnmount=function(){var a=this.$1;a!=null&&a.abandon()};return c}(i.Component);a.defaultProps={isInActive:!1,matchWords:null};e.exports=a}),null);
__d("SearchEntityModuleUtils",["Base64","SearchEntityModuleServerConstants"],(function(a,b,c,d,e,f){"use strict";e.exports={addExtraParamsToSeeMoreURI:function(a,c,d){d={ref:d==="header"?b("SearchEntityModuleServerConstants").BROWSE_NAV_SOURCE_HEADER_SEE_ALL:b("SearchEntityModuleServerConstants").BROWSE_NAV_SOURCE_SEE_MORE};c!=null&&(d.sid=c);return a.setQueryData(babelHelpers["extends"]({},a.getQueryData(),{ref:b("Base64").encode(JSON.stringify(d)).replace(/\=+$/,""),epa:"SEE_MORE"}))}}}),null);
__d("SearchEntityModuleResult.react",["ix","cx","fbt","AsyncRequest","Badge.react","Bootloader","BrowseClientEventLogger","CurrentUser","DOM","DOMContainer.react","HovercardLink","Image.react","Link.react","PageRatingConfig","PageRecommendationsCircleScore.react","PageRecommendationsCircleScoreType","React","SearchEntityModuleServerConstants","SearchResultPageExperiments","TrackingNodes","XSearchBrowseActionsController","XUIButton.react","XUISpinner.react","asset","joinClasses","memoize","uniqueID"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React"),k=72,l=b("PageRecommendationsCircleScoreType").SEARCH_RESULT_LARGE;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={actionsLoaded:!1,FoodDrinkSearchHighlight:null,ServicesSearchOfferHighlight:null,actionsWrapper:b("DOM").create("div",{id:b("uniqueID")()})},d.getLoggingData=b("memoize")(function(){var a=b("SearchEntityModuleServerConstants").TYPE_TO_DISPLAY_STYLE[d.props.result.type],c=b("SearchEntityModuleServerConstants").TYPE_TO_BROWSE_TYPE[d.props.result.type],e=b("SearchEntityModuleServerConstants").WWW_GRAPH_SEARCH_RESULTS_TRACKABLE_CODE;e=e+JSON.stringify({display_style:a,id:d.props.result.tuid,item_type:"result",module_result_type:c,module_type:d.props.module_role,position_in_module:d.props.position_in_module,query:d.props.browse_query,raw_id:parseInt(d.props.result.tuid,10),session_id:d.props.browse_session_id,vertical:"content",is_bootstrap:d.props.result.is_bootstrap,unit_id:d.props.result.logging_unit_id,unit_id_click_type:"graph_search_results_item_in_module_tapped",unit_id_result_id:d.props.result.tuid});return{"data-xt":e,"data-gt":JSON.stringify({type:"xtracking",xt:e}),"data-bt":JSON.stringify({id:parseInt(d.props.result.tuid,10)}),"data-xt-vimp":JSON.stringify(d.props.client_view_config),"data-vistracking":"1","data-insertion-position":d.props.position_in_module}}),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$1=[];this.renderActions();this.logImpression();this.props.result.food_drink_highlight&&!this.state.FoodDrinkSearchHighlight&&b("Bootloader").loadModules(["FoodDrinkSearchHighlight.react"],function(b){return a.setState({FoodDrinkSearchHighlight:j.jsx(b,babelHelpers["extends"]({},a.props.result.food_drink_highlight))})},"SearchEntityModuleResult.react");this.props.result.services_offer_highlight&&!this.state.ServicesSearchOfferHighlight&&b("Bootloader").loadModules(["ServicesSearchOfferHighlight.react"],function(b){return a.setState({ServicesSearchOfferHighlight:j.jsx(b,babelHelpers["extends"]({},a.props.result.services_offer_highlight))})},"SearchEntityModuleResult.react")};d.render=function(){var a=this.props.result.uri,c=b("HovercardLink").constructEndpoint({id:this.props.result.tuid}),d;this.props.result.badge_type?d=j.jsx(b("Badge.react"),{type:this.props.result.badge_type,size:"small"}):this.props.result.is_verified===!0&&(d=j.jsx(b("Badge.react"),{type:"verified",size:"small"}));var e=this.props.result.snippets.map(function(a,c){return j.jsx(b("DOMContainer.react"),{className:(c===0?"_2yep":"")+(c!==0?" _2yeq":""),children:a},"snippet_"+c)}),f=j.jsx(b("Image.react"),{className:"_2yeu"+(b("SearchResultPageExperiments").entityTypeHasRoundedProfileImageMap[this.props.result.type]?" _6n07":""),src:this.props.result.photo,width:k,height:k,alt:this.props.result.text}),h,m=this.state.actionsWrapper;m!=null&&(h=j.jsxs("div",{className:"_2ye_",children:[j.jsx(b("DOMContainer.react"),{children:m}),j.jsx(b("XUIButton.react"),{className:"_4cei"+(this.state.actionsLoaded?" hidden_elem":""),image:j.jsx(b("XUISpinner.react"),{size:"small",background:"dark"}),label:i._("Loading...")})]}));m=this.props.result.is_currently_live&&this.props.result.is_gaming_page?j.jsx(b("Image.react"),{className:"_2rru",src:g("404364")}):null;var n=null,o=null;if(this.props.result.type==="user"){var p;n=(p=b("TrackingNodes")).getTrackingInfo(p.types.PROFILE_LINK);o=p.getTrackingInfo(p.types.USER_PROFILE_PIC)}p=null;var q=null;n=j.jsxs("div",{style:{WebkitLineClamp:2},className:"_52eh _5bcu","data-ft":n,children:[this.props.result.text,d,m]});m=this.props.result.missing_words!=null?j.jsx("div",{className:"_40e4",children:j.jsx(b("DOMContainer.react"),{children:this.props.result.missing_words})}):null;var r=null;this.props.result.type==="place"&&b("PageRatingConfig").show_rating_circle?r=j.jsxs("div",{className:"_2yet"+(this.props.result.is_inactive?" _7b-4":""),children:[j.jsx(b("Link.react"),{"aria-hidden":!0,href:a,"data-hovercard":c,tabIndex:-1,children:f}),j.jsx(b("PageRecommendationsCircleScore.react"),{className:"_29iq",pageIDString:this.props.result.tuid,scoreType:l})]}):r=j.jsx(b("Link.react"),{"aria-hidden":!0,className:"_2yet"+(this.props.result.is_inactive?" _7b-4":""),href:a,"data-hovercard":c,"data-ft":o,tabIndex:-1,children:f});return j.jsxs("div",babelHelpers["extends"]({"data-testid":void 0,className:b("joinClasses")("_2yer _401d _2nuh",this.props.className),"data-ft":b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.BROWSE_RESULT)},this.getLoggingData(),{children:[m,r,j.jsxs("div",{className:"_2yev",children:[j.jsxs("div",{className:"_2xjf",children:[j.jsx(b("Link.react"),{"data-testid":void 0,href:a,className:"_2yez"+(this.props.result.is_inactive?" _7b-4":""),"data-hovercard":c,children:n}),p,q,h]}),j.jsxs("div",{className:"_2ye-",children:[e.shift(),j.jsx("div",{className:"_2xjg",children:e})]}),this.state.FoodDrinkSearchHighlight,this.state.ServicesSearchOfferHighlight]})]}))};d.renderActions=function(){var a=this;if(!b("CurrentUser").isLoggedIn()){this.setState({actionsLoaded:!0});return}var c=b("SearchEntityModuleServerConstants").TYPE_TO_BROWSE_TYPE[this.props.result.type];c=b("XSearchBrowseActionsController").getURIBuilder().setString("id",this.props.result.tuid).setString("result_type",c).setString("session_id",this.props.browse_session_id).setString("query",this.props.plain_text_query).setString("logging_unit_id",this.props.result.logging_unit_id);c=new(b("AsyncRequest"))(c.getURI()).setData({actions_id:this.state.actionsWrapper.id}).setMethod("POST").setHandler(function(b){b=a.state.actionsWrapper;if(b==null){a.setState({actionsLoaded:!0});return}a.setState({actionsLoaded:!0})}).setAllowCrossPageTransition(!0);var d=this.$1;d!=null&&d.push(c);c.send()};d.logImpression=function(){var a=this.getLoggingData();b("BrowseClientEventLogger").logImpression({xt:a["data-xt"]})};d.componentWillUnmount=function(){var a=this.$1;a!=null&&a.forEach(function(a){a.abandon()})};return c}(j.Component);e.exports=a}),null);
__d("SearchEntityModule.react",["ix","cx","fbt","DOMContainer.react","Image.react","Link.react","React","SearchEntityModuleResult.react","SearchEntityModuleServerConstants","SearchEntityModuleUtils","SearchProfileResult.react","SearchResultPageExperiments","SubscriptionsHandler","URI","asset","memoize","memoizeWithArgs"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.state={isExpanded:d.props.num_results_to_show==null};d.onSeeMoreLinkClick=function(a){a.preventDefault(),d.setState({isExpanded:!0})};d.getModuleLoggingData=b("memoize")(function(){var a=b("SearchEntityModuleServerConstants").WWW_GRAPH_SEARCH_RESULTS_TRACKABLE_CODE;a=a+JSON.stringify({query:d.props.browse_query,session_id:d.props.browse_session_id,module_type:d.props.module_role,unit_id:d.props.logging_unit_id,unit_id_click_type:"view_port_views_on_search_results"});return{"data-gt":JSON.stringify({type:"xtracking",xt:a}),"data-xt":a,"data-xt-vimp":JSON.stringify(d.props.client_view_config),"data-vistracking":"1"}});d.getSeeMoreLoggingData=b("memoizeWithArgs")(function(a){var c=b("SearchEntityModuleServerConstants").WWW_GRAPH_SEARCH_RESULTS_TRACKABLE_CODE,e=b("SearchEntityModuleServerConstants").SEE_MORE_LOGGING.MODULE_HEADER_ITEM_TYPE,f=b("SearchEntityModuleServerConstants").SEE_MORE_LOGGING.MODULE_FOOTER_ITEM_TYPE;c=c+JSON.stringify({item_type:a==="header"?e:f,module_type:d.props.module_role,query:d.props.browse_query,session_id:d.props.browse_session_id,source_module_role:d.props.module_role,vertical:"content",unit_id:d.props.logging_unit_id,unit_id_click_type:"graph_search_results_see_more_on_module_tapped"});return{"data-xt":c,"data-gt":JSON.stringify({type:"xtracking",xt:c}),"data-xt-vimp":JSON.stringify(d.props.client_view_config),"data-vistracking":"1","data-bt":JSON.stringify({ct:"see_more",source_module_role:d.props.module_role})}},function(a){return a});d.$1=new(b("SubscriptionsHandler"))();return d}var d=c.prototype;d.getResultComponent=function(a,c){var d=b("SearchResultPageExperiments").entityTypeHasViewModelComponentMap[a.type];if(d){d=a.snippets.map(function(a,c){return k.jsx(b("DOMContainer.react"),{children:a},"snippet_"+c)});return k.jsx(b("SearchProfileResult.react"),{id:a.tuid,type:a.type,profileURI:a.uri.toString(),photoURI:a.photo!=null?a.photo.toString():null,snippets:d,text:a.text,isInActive:a.is_inactive,isVerified:a.is_verified,isWorkForeignEntity:!1,officialStatus:null,loggingUnitID:a.logging_unit_id,sessionID:this.props.browse_session_id,query:this.props.plain_text_query,module_role:this.props.module_role,client_view_config:this.props.client_view_config,shouldShowLiveBadge:!1,videoID:null})}return k.jsx(b("SearchEntityModuleResult.react"),{result:a,position_in_module:c,browse_query:this.props.browse_query,client_view_config:this.props.client_view_config,browse_session_id:this.props.browse_session_id,module_role:this.props.module_role,plain_text_query:this.props.plain_text_query,viewer_id:this.props.viewer_id,result_type:this.props.result_type})};d.renderResult=function(a,b){var c=(b!==0||this.props.is_split_module_bottom)&&!this.props.split_apart_results?"_7tkv":"";c=k.jsx("div",{className:c,children:this.getResultComponent(a,b)},a.tuid+b);return this.props.split_apart_results?k.jsx("div",{className:"_19_p",children:c},a.tuid+b):c};d.render=function(){var a=this,b=this.maybeRenderHeader(),c=this.renderFooterComponents(),d=this.props.num_results_to_show;d=!this.state.isExpanded&&d!=null?this.props.results.slice(0,d):this.props.results;d=d.map(function(b,c){return a.renderResult(b,c)});return this.props.split_apart_results?k.jsx("div",babelHelpers["extends"]({},this.getModuleLoggingData(),{children:d})):k.jsx("div",babelHelpers["extends"]({},this.getModuleLoggingData(),{children:k.jsxs("div",{className:"_19_p"+(this.props.is_split_module_top?" _6rch":"")+(this.props.is_split_module_bottom?" _6rci":""),children:[b,k.jsx("div",{className:"_6rbb",children:d}),c]})}))};d.maybeRenderHeader=function(){if(!this.props.should_render_header)return null;var a=this.props.results.length!==0,c,d=this.props.see_more_uri!=null?new(j||(j=b("URI")))(this.props.see_more_uri):null;if(d!=null){d=b("SearchEntityModuleUtils").addExtraParamsToSeeMoreURI(d,this.props.typeahead_session_id,"header");var e=i._("See All");c=k.jsx(b("Link.react"),babelHelpers["extends"]({},this.getSeeMoreLoggingData("header"),{href:d,children:e}))}d=this.props.title instanceof Object&&this.props.title.__html!=null?k.jsx("span",{dangerouslySetInnerHTML:this.props.title}):this.props.title;return k.jsxs("div",{className:"_6ojs"+(a?" _6roq":""),children:[!a&&this.props.result_type==="user"?k.jsx("div",{className:"_82w1",children:k.jsx(b("Image.react"),{className:"_82w2",src:g("484258")})}):null,k.jsx("div",{className:"_6ojt"+(a?"":" _82w3"),children:d}),c]})};d.renderFooterComponents=function(){if(!this.props.should_render_footer)return[];var a=[],c=k.jsx("div",{className:"_6rbe _6rbf"+(this.state.isExpanded||this.props.num_results_to_show==null||this.props.results.length<=this.props.num_results_to_show?" hidden_elem":""),children:k.jsx(b("Link.react"),babelHelpers["extends"]({},this.getSeeMoreLoggingData("footer"),{href:"#",onClick:this.onSeeMoreLinkClick,children:i._("See all")}))},"see_more_footer");a.push(c);c=this.props.see_more_uri!=null?new(j||(j=b("URI")))(this.props.see_more_uri):null;if(c!=null){c=k.jsx("div",{className:"_6rbe _6rbf"+(!this.state.isExpanded&&this.props.num_results_to_show!=null&&this.props.results.length>this.props.num_results_to_show?" hidden_elem":""),children:k.jsx(b("Link.react"),babelHelpers["extends"]({},this.getSeeMoreLoggingData("footer"),{href:b("SearchEntityModuleUtils").addExtraParamsToSeeMoreURI(c,this.props.typeahead_session_id,"footer"),children:i._("See All")}))},"see_all_footer");a.push(c)}return a};d.componentWillUnmount=function(){this.$1.release()};return c}(k.Component);e.exports=a}),null);
__d("SearchHCMMatchUtil",["FBLogger","SearchHCMServerConstants","TokenizeUtil"],(function(a,b,c,d,e,f){"use strict";var g={};Object.keys(b("SearchHCMServerConstants").MATCH_CRITERIA_TO_STRING).forEach(function(a){a=Number(a);a=a;g[b("SearchHCMServerConstants").MATCH_CRITERIA_TO_STRING[a]]=a});function h(a){return b("TokenizeUtil").parse(a).tokens.join("")}function a(a,c,d){c=c.toLowerCase().trim();d=d.toLowerCase().trim();a=typeof a==="string"?g[a]:a;switch(a){case 0:return c===d;case 1:return d.indexOf(c)!==-1;case 3:return d.indexOf(c)===0;case 4:return!0;case 5:return h(c)===h(d);default:b("FBLogger")("search").warn("Unexpected HCM match criteria %s",a);return c===d}}e.exports={match:a}}),null);
__d("SearchHCMUtil",["invariant","SearchEntityModuleServerConstants","SearchHCMMatchUtil"],(function(a,b,c,d,e,f,g){"use strict";var h={shouldTriggerBEMHCM:function(a,c){if(!c.bemHCMEnabled)return!1;var d=c.hcm_match_criteria;if(d==null&&c.type==="user"&&b("SearchHCMMatchUtil").match(0,a,c.text))return!0;return c.show_hcm_experience!==!0?!1:d!=null&&b("SearchHCMMatchUtil").match(d,a,c.text)},getHighConfidenceArgument:function(a,c){if(!h.shouldTriggerBEMHCM(a,c))return null;c!=null||g(0,1463);return{id:c.id,module_role:b("SearchEntityModuleServerConstants").RESULT_TYPE_TO_MODULE_ROLE[c.type],source:null}}};e.exports=h}),null);
__d("XSearchBEMUnitDataLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/search/async/log_bem_unit_data/",{session_id:{type:"String",required:!0},logging_unit_id:{type:"String",required:!0},query:{type:"String",required:!0},query_function:{type:"String",required:!0},results_module_role:{type:"String",required:!0},tapped_result_entity_id:{type:"String"},entity_ids:{type:"StringSet"},bootstrap_item_count:{type:"Int"},should_log_module_impression:{type:"Bool",defaultValue:!1},is_high_confidence_module:{type:"Bool",defaultValue:!1}})}),null);
__d("XSearchProfilePictureController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/search/async/profile_picture/",{fbid:{type:"FBID",required:!0},width:{type:"Int",required:!0},height:{type:"Int",required:!0}})}),null);
__d("generateBrowseSessionID",["CurrentUser","md5"],(function(a,b,c,d,e,f){var g={mtouch:"412378670482",www:"256281040558"};function a(a){var c=a.appName;a=a.edge;return b("md5")([g[c],b("CurrentUser").getID(),a,Math.floor(Date.now()/30)].join(":"))}e.exports=a}),null);
__d("SearchInstantBootstrapEntityModule",["cx","fbt","Arbiter","AsyncRequest","BanzaiODS","Base64","BlueBar","BrowseClickLogger","ContextualComponent","CSS","CurrentUser","DOM","FacebarKeywordSearchUtils","PageTransitionsRegistrar","Quickling","QuicklingConfig","React","ReactDOM","ReactRenderer","Run","SearchBootstrapEntityModuleDebugUtil","SearchBootstrapEntityModuleUIConfig","SearchBootstrapEntityModuleUtil","SearchEntityModule.react","SearchEntityModuleServerConstants","SearchHCMUtil","SearchHighConfUserAttachmentsExperiment","SearchProfileResultConstants","SearchResultPageNavigationPerfMetrics","SearchWWWTrackableClientViewConfig","SubscriptionsHandler","URI","ViewableImpressionTracking","XSearchBEMUnitDataLoggingController","XSearchProfilePictureController","XUIPageNavigation.react","XUIPageNavigationGroup.react","XUIPageNavigationItem.react","XUISpinner.react","ge","generateBrowseSessionID"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("React"),k=[h._("All"),h._("Posts"),h._("People"),h._("Photos"),h._("Videos"),h._("Pages"),h._("Places"),h._("Groups"),h._("Apps"),h._("Events")],l=[h._("All"),h._("Posts"),h._("People"),h._("Groups"),h._("Events"),h._("Photos")],m,n={};a=function(){function a(a){var c=this;this.$11=[];this.$12=!1;this.$13=!1;this.$14=!1;this.$19=function(a){c.$12=!1;if(!b("SearchBootstrapEntityModuleUtil").isTopTabURI(a))return;c.$14=!0;var d,e=b("FacebarKeywordSearchUtils").decodeFacebarURIParams(a);e!=null&&(c.$8=e.sid,d=e.bsid);d==null&&(d=b("generateBrowseSessionID")({appName:"www",edge:"keywords_search"}));c.$9=d;c.$4=b("SearchBootstrapEntityModuleUtil").getQueryFromURI(a);c.$20();c.$21(a);c.$14&&c.$11.length>0&&(c.$22(),c.$23());c.$24()};this.$27=function(a){if(c.$9==null)return;c.$11=b("SearchBootstrapEntityModuleUtil").transformRawBootstrapResultsToEntityModuleResults(a,c.$9)};this.$1=a.getCore();this.$2=new(b("SubscriptionsHandler"))();m=this}var c=a.prototype;c.enable=function(){var a=this;this.$7=b("ge")("content");if(this.$7==null)return;b("Run").onAfterLoad(function(){a.$15();a.$2.addSubscriptions(b("Arbiter").subscribe("page_transition",function(){if(!a.$16())return;a.$17();a.$18()}));if(!a.$16())return;a.$17();a.$18()})};c.$16=function(){return b("Quickling").isActive()&&b("Quickling").getLoadCount()<b("QuicklingConfig").sessionLength-1};c.disable=function(){this.$2.release()};c.$17=function(){this.$12||(b("PageTransitionsRegistrar").registerHandler(this.$19),this.$12=!0)};c.$18=function(){var a=this;if(this.$13)return;var c=this.$7;if(c==null)return;c=b("ContextualComponent").closestToNode(c);if(c==null)return;c.onUnmount(function(){a.$25(),a.$13=!1});this.$13=!0};c.$25=function(){if(b("SearchBootstrapEntityModuleUtil").isTopTabURI((i||(i=b("URI"))).getNextURI())){this.$14&&this.$11.length===0&&(this.$22(),this.$23());return}this.$23();this.$22()};c.$15=function(){var a=b("DOM").create("div",{className:"_126b"}),c=b("BlueBar").getBar();this.$3=b("DOM").create("div",{className:"_126c"},a);b("ReactRenderer").constructAndRenderComponentAcrossTransitions(b("XUISpinner.react"),{size:"large"},a);a=b("CurrentUser").isWorkUser();this.$6=b("DOM").create("div",{style:c!=null?"top: "+c.offsetHeight+"px":null,className:"_126d"+(a?" _6q81":"")},[this.$3,this.$26()]);b("DOM").appendContent(this.$6,this.$3);this.$6!=null&&b("CSS").hide(this.$6);b("DOM").appendContent(document.body,this.$6)};c.$26=function(){var a=b("CurrentUser").isWorkUser()?l:k;a=a.map(function(a,c){return j.jsx(b("XUIPageNavigationItem.react"),{className:"_4gsg",href:"#",children:a},c)});var c=b("DOM").create("div"),d=b("DOM").create("div",{style:"top: initial",className:"_5sqx _4-u2 _4-u8","aria-hidden":!0},b("DOM").create("div",{className:"_zz9 _5im-"},c));b("ReactRenderer").constructAndRenderComponentAcrossTransitions(b("XUIPageNavigation.react"),{children:j.jsx(b("XUIPageNavigationGroup.react"),{children:a})},c);return d};c.$20=function(){b("Arbiter").inform("FacebarDataSource.getBootstrapMatches",{query:this.$4,callback:this.$27},"persistent")};c.$21=function(a){var c=this.$4,d=this.$11;if(c==null||d.length===0)return;var e,f=a.getQueryData().ref,g=b("FacebarKeywordSearchUtils").decodeFacebarURIParams(a);g==null&&(e=f);f=d.map(function(a){return a.tuid});var h=this.$9;if(h==null)return;var i=this.getPossibleHCMResult(d);g=babelHelpers["extends"]({},g,{preloaded_entity_ids:f,preloaded_entity_type:d[0].type,ent_ids:this.$1.getSquashedEntityIDsFromQueryString(c),bsid:h,high_confidence_argument:i==null?null:b("SearchHCMUtil").getHighConfidenceArgument(c,i)});e!=null&&(g.ref=e);a.setQueryData(babelHelpers["extends"]({},a.getQueryData(),{ref:b("Base64").encode(JSON.stringify(g)).replace(/\=+$/,"")}))};c.$24=function(){var a=this,c=this.$11,d=this.$4,e=this.$9;if(c==null||d==null||e==null)return;if(c.length===0){b("SearchBootstrapEntityModuleDebugUtil").printDebugNotice("new_bem_with_instant_loading","no_matches");return}var f=b("DOM").create("div",{"data-bt":JSON.stringify({session_id:e,typeahead_sid:this.$8})});b("DOM").prependContent(this.$3,f);b("BrowseClickLogger").init(f);var g=b("SearchBootstrapEntityModuleUtil").getTitleForResultType(c[0].type),h=b("SearchBootstrapEntityModuleUtil").generateUnitIDWithPrefix("www_instant_bem"),i="keywords_search("+d+")",j=this.getPossibleHCMResult(c),k=j!=null&&b("SearchHCMUtil").shouldTriggerBEMHCM(d,j);j=!k&&c[0].type!=="user"&&b("SearchBootstrapEntityModuleUIConfig").shouldSplitApartNonPeopleResults;c.forEach(function(a){var c=a.type==="user";c&&(a.photo=b("XSearchProfilePictureController").getURIBuilder().setFBID("fbid",a.tuid).setInt("width",b("SearchProfileResultConstants").PROFILE_PICTURE_SIZE).setInt("height",b("SearchProfileResultConstants").PROFILE_PICTURE_SIZE).getURI().toString())});b("SearchBootstrapEntityModuleUIConfig").shouldUseEntityTypeSnippet&&!j&&!k&&c.forEach(function(a){var b=n[a.tuid];b==null&&(n[a.tuid]=a.snippets,b=a.snippets);a.snippets=b.slice(1)});this.$10={plain_text_query:d,browse_query:i,results:c,module_role:b("SearchEntityModuleServerConstants").RESULT_TYPE_TO_MODULE_ROLE[c[0].type],result_type:c[0].type,num_results_to_show:b("SearchBootstrapEntityModuleUIConfig").numResultsToShow,client_view_config:b("SearchWWWTrackableClientViewConfig"),browse_session_id:e,title:g,see_more_uri:b("SearchBootstrapEntityModuleUtil").getSeeMoreURIForResults(c,d).toString(),logging_unit_id:h,viewer_id:b("CurrentUser").getID(),should_render_header:!k,should_render_footer:!1,typeahead_session_id:this.$8,split_apart_results:j};this.$5!=null&&b("SearchBootstrapEntityModuleDebugUtil").printDebugNotice("new_bem_with_instant_loading","previous_bem_not_unmounted");this.$5=b("ReactRenderer").constructAndRenderComponentAcrossTransitions(b("SearchEntityModule.react"),this.$10,f,function(){a.$28(),a.$29({plain_text_query:d,browse_query:i,results:c,browse_session_id:e,logging_unit_id:h,module_role:b("SearchEntityModuleServerConstants").RESULT_TYPE_TO_MODULE_ROLE[c[0].type],is_high_confidence_module:k}),b("ViewableImpressionTracking").init()})};c.$28=function(){this.$14=!1,this.$30(),b("SearchResultPageNavigationPerfMetrics").setElementDisplayEndTime("bootstrap_entity_module"),b("SearchBootstrapEntityModuleDebugUtil").printDebugNotice("new_bem_with_instant_loading","shown")};c.$23=function(){var a=this.$5;if(a==null)return;var c=!1;a=b("ReactDOM").findDOMNode(a);a!=null&&a.parentNode!=null&&(c=b("ReactDOM").unmountComponentAtNode(a.parentNode));c||b("BanzaiODS").bumpEntityKey(2966,"search.www.bem.instant_bem","current_bem_did_not_unmount");this.$5=null;this.$14=!1};c.$30=function(){this.$6!=null&&b("CSS").show(this.$6),this.$7!=null&&b("CSS").hide(this.$7)};c.$22=function(){this.$7!=null&&b("CSS").show(this.$7);if(this.$6==null){b("SearchBootstrapEntityModuleDebugUtil").printDebugNotice("new_bem_with_instant_loading","page_background_not_found");return}b("CSS").hide(this.$6)};a.moveInsideWrapper=function(c){if(m==null){b("SearchBootstrapEntityModuleDebugUtil").printDebugNotice("new_bem_with_instant_loading","bem_not_initialized");return}m.$22();var a=m.$5;if(a==null){b("SearchBootstrapEntityModuleDebugUtil").printDebugNotice("new_bem_with_instant_loading","no_module_found_on_instance");return}a=b("ReactDOM").findDOMNode(a);if(a==null){b("SearchBootstrapEntityModuleDebugUtil").printDebugNotice("new_bem_with_instant_loading","no_module_root_found");return}if(a.parentNode==null){b("SearchBootstrapEntityModuleDebugUtil").printDebugNotice("new_bem_with_instant_loading","no_parent_node_found_for_module_root");return}b("DOM").contains(document.body,c)||b("SearchBootstrapEntityModuleDebugUtil").printDebugNotice("new_bem_with_instant_loading","wrapper_not_in_dom");b("DOM").appendContent(c,a.parentNode)};a.updateFooter=function(a){if(m==null)return;var c=m.$10,d=b("ReactDOM").findDOMNode(m.$5);if(c==null||(d==null?void 0:d.parentNode)==null)return;m.$5=b("ReactRenderer").constructAndRenderComponentAcrossTransitions(b("SearchEntityModule.react"),babelHelpers["extends"]({},c,{is_split_module_top:!a.showBottomBorder,should_render_footer:a.showBottomBorder&&a.showSeeMore}),d.parentNode)};c.$29=function(a){var c=b("XSearchBEMUnitDataLoggingController").getURIBuilder().setString("logging_unit_id",a.logging_unit_id).setString("session_id",a.browse_session_id).setString("query",a.plain_text_query).setString("query_function",a.browse_query).setString("results_module_role",a.module_role).setInt("bootstrap_item_count",a.results.filter(function(a){return a.is_bootstrap}).length).setStringSet("entity_ids",a.results.map(function(a){return a.tuid})).setBool("is_high_confidence_module",a.is_high_confidence_module).setBool("should_log_module_impression",!0);new(b("AsyncRequest"))(c.getURI()).setAllowCrossPageTransition(!0).send();for(var d=a.results,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;c=b("XSearchBEMUnitDataLoggingController").getURIBuilder().setString("logging_unit_id",g.logging_unit_id).setString("session_id",a.browse_session_id).setString("query",a.plain_text_query).setString("query_function",a.browse_query).setString("results_module_role",a.module_role).setString("tapped_result_entity_id",g.tuid).setBool("is_high_confidence_module",a.is_high_confidence_module);new(b("AsyncRequest"))(c.getURI()).setAllowCrossPageTransition(!0).send()}};c.getPossibleHCMResult=function(a){var c=a[0];return a.length!==1||c==null?null:{id:c.tuid,text:c.text,type:c.type,bemHCMEnabled:b("SearchHighConfUserAttachmentsExperiment").bemHCMEnabled,show_hcm_experience:c.show_hcm_experience,hcm_match_criteria:c.hcm_match_criteria}};return a}();e.exports=a}),null);